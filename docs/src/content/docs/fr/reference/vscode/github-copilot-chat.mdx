---
title: GitHub Copilot Chat
sidebar:
  order: 3
description: Int√©grez-vous avec GitHub Copilot Chat pour ex√©cuter des scripts
  via un participant de chat et des invites personnalis√©es dans Visual Studio
  Code. Apprenez √† ex√©cuter des scripts, s√©lectionner des mod√®les, exploiter le
  contexte et activer des flux de travail de codage assist√© par l‚ÄôIA plus
  efficaces gr√¢ce aux interfaces de chat.
keywords:
  - Copilot Chat
  - VS Code extensions
  - AI scripting
  - code automation
  - chat participants
hero:
  image:
    alt: A small, flat, abstract image uses five solid colors and geometric 8-bit
      shapes to depict a chat bubble, a sheet of code with bracket symbols, an
      AI chip, and a diagram block connected by thin lines. The icons are
      arranged without backgrounds or text, all in a simple corporate style,
      illustrating AI-driven chat and code integration.
    file: ../../../reference/vscode/github-copilot-chat.png

---

import { Image } from "astro:assets";
import { YouTube } from "astro-embed";
import { Code } from "@astrojs/starlight/components";
import scriptSource from "../../../../../../../packages/sample/genaisrc/samples/copilotchat.genai.mjs?raw";
import src from "../../../../../assets/chat-participant.png";
import alt from "../../../../../assets/chat-participant.png.txt?raw";
import { Steps } from "@astrojs/starlight/components";

GenAIScript s'int√®gre avec [GitHub Copilot Chat](https://marketplace.visualstudio.com/items?itemName=GitHub.copilot-chat)
en fournissant un **participant de chat** qui vous permet d'ex√©cuter des scripts dans le contexte d'une conversation de chat,
et une **invite personnalis√©e** pour g√©n√©rer GenAIScript plus efficacement avec Copilot Chat.

:::tip
Si vous devez v√©rifier votre quota de requ√™tes premium disponible pour GitHub Copilot, rendez-vous sur [Fonctionnalit√©s](https://github.com/settings/copilot/features)
:::

## Participant de chat `@genaiscript`

Le [participant de chat](https://code.visualstudio.com/api/extension-guides/chat#parts-of-the-chat-user-experience) `@genaiscript` vous permet d'ex√©cuter des scripts sans le contexte
d'une conversation [GitHub Copilot Chat](https://marketplace.visualstudio.com/items?itemName=GitHub.copilot-chat).
Cela est utile pour exploiter des scripts existants dans une session de chat interactive.

<Image src={src} alt={alt} loading="lazy" />

### Choix du script √† ex√©cuter

La commande `/run` attend un identifiant de script comme premier argument (par exemple, `/run poem`). Le reste de la requ√™te est
transmis au script sous la variable `env.vars.question`.

```sh
@genaiscript /run summarize
```

Si vous omettez la commande `/run`, GenAIScript recherchera un script nomm√© `copilotchat`. S'il en trouve un, il l'ex√©cutera.
Sinon, il vous demandera de choisir un script dans la liste des scripts disponibles.

```sh
@genaiscript add comments to the current editor
```

### Choix du mod√®le

Si votre script ne sp√©cifie pas de mod√®le, GenAIScript vous invitera √† en choisir un.
Vous pouvez √©galement sp√©cifier quel mod√®le choisir dans la configuration du script en utilisant le fournisseur `github_copilot_chat`.

* mod√®le actuellement s√©lectionn√© : `github_copilot_chat:current`

```js "github_copilot_chat:current"
script({
  model: "github_copilot_chat:current",
});
```

* gpt-4o-mini : `github_copilot_chat:gpt-4o-mini`

```js "github_copilot_chat:gpt-4o-mini"
script({
  model: "github_copilot_chat:gpt-4o-mini",
});
```

Lorsque GenAIScript vous invite √† choisir un mod√®le, il stocke vos choix dans les param√®tres de l'espace de travail
sous

```json file=".vscode/settings.json"
{
  "genaiscript.languageChatModels": {
    "gpt-4o": "gpt-4o-2024-11-20"
  }
}
```

:::note
**Les mod√®les GitHub Copilot Chat sont uniquement disponibles dans Visual Studio Code.** Ils ne fonctionneront pas depuis
les interfaces [cli](../../../reference/reference/cli/) ou [playground](../../../reference/reference/playground/).
:::

#### Disponibilit√© des mod√®les

Tous les mod√®les list√©s dans l'interface utilisateur de GitHub Copilot Chat ne sont pas disponibles pour les extensions tierces.
Lorsque GenAIScript tente d'acc√©der √† un mod√®le non disponible, il vous en informe mais n'a pas
de contr√¥le sur votre configuration d'acc√®s aux mod√®les.

### Contexte

Le contexte s√©lectionn√© par l'utilisateur dans Copilot Chat est converti en variables et transmis au script :

* le contenu de l'invite est pass√© dans `env.vars.question`. L'identifiant du script est supprim√© dans le cas de `/run`.
* le texte courant de l'√©diteur est pass√© dans `env.vars["copilot.editor"]`
* la s√©lection courante de l'√©diteur est pass√©e dans `env.vars["copilot.selection"]`
* toutes les autres r√©f√©rences de fichiers sont transmises dans `env.files`

#### Exemples

* `mermaid` g√©n√©rera un diagramme √† partir de l'invite de l'utilisateur.

```js title="mermaid.genai.mjs" wrap
def("CODE", env.files);
$`Generate a class diagram using mermaid of the code symbols in the CODE.`;
```

* `websearcher` effectuera une recherche web pour l'invite de l'utilisateur
  et utilisera le fichier en contexte dans la r√©ponse.

```js title="websearcher.genai.mjs" wrap
const res = await retrieval.webSearch(env.vars.question);
def("QUESTION", env.vars.question);
def("WEB_SEARCH", res);
def("FILE", env.files, { ignoreEmpty: true });
$`Answer QUESTION using WEB_SEARCH and FILE.`;
```

* `dataanalyst` utilise les outils d'interpr√®te de code Python pour
  r√©soudre une question de calcul de donn√©es.

```js title="dataanalyst.genai.mjs" wrap
script({
  tools: [
    "fs_read_file",
    "python_code_interpreter_copy_files_to_container",
    "python_code_interpreter_read_file",
    "python_code_interpreter_run",
  ],
});
def("DATA", env.files.map(({ filename }) => filename).join("\n"));
def("QUESTION", env.vars.question);

$`Run python code to answer the data analyst question 
in QUESTION using the data in DATA.
Return the python code that was used to compute the answer.
`;
```

#### Historique

L'historique des messages est transmis dans `env.vars["copilot.history"]`. Il s'agit d'un tableau de `HistoryMessageUser | HistoryMessageAssistant` :

```json
[
  {
    "role": "user",
    "content": "write a poem"
  },
  {
    "role": "assistant",
    "content": "I am an assistant"
  }
]
```

### Conversation continue

Vous pouvez utiliser le chat `@genaiscript` pour int√©grer l'ex√©cution d'un script dans une conversation existante
ou pour continuer la conversation avec Copilot avec les r√©sultats du script. Les r√©sultats
du script sont r√©int√©gr√©s dans l'historique du chat et sont accessibles √† tout copilot par la suite.

* `@genaiscript /run tool` ex√©cutera le script `tool` et r√©int√©grera les r√©sultats dans l'historique du chat.
* `analyze the results` continuera la conversation avec les r√©sultats du script.

### Script par d√©fautLe script suivant peut √™tre utilis√© comme mod√®le de d√©part pour cr√©er le script par d√©faut lorsque l'utilisateur ne saisit pas la commande `/run`.

Le script suivant peut √™tre utilis√© comme mod√®le de d√©part pour cr√©er le script par d√©faut lorsque l'utilisateur n'utilise pas la commande `/run`.

<Code code={scriptSource} wrap={true} lang="ts" title="genaisrc/copilotchat.genai.mts" />

### Fonctionnalit√©s non prises en charge

Les fonctionnalit√©s suivantes ne sont actuellement pas prises en charge dans le participant de chat :

* Outils (`#tool`)
* R√©f√©rence `Workspace`

## instructions personnalis√©es `genaiscript`GenAIScript enregistrera automatiquement un fichier instructions.md dans le dossier `.genaiscript/instructions` lorsque vous ex√©cutez un script. Ce fichier contient les instructions utilis√©es pour g√©n√©rer le script.

GenAIScript sauvegardera automatiquement un fichier instructions.md dans le dossier `.genaiscript/instructions`
lorsque vous ex√©cutez un script. Ce fichier contient les instructions utilis√©es pour g√©n√©rer le script.

### Sessions de chat augment√©es

Voici comment d√©marrer une session de chat en utilisant l'invite `genaiscript`.

<Steps>
  <ol>
    <li>
      S√©lectionnez l'ic√¥ne **Attacher le contexte** üìé (`Ctrl+/`), puis s√©lectionnez **Instructions...**,
      puis choisissez l'invite **genaiscript.instructions.md**.
    </li>

    <li>
      Incluez des instructions pour √©crire un script ou r√©pondre √† une question concernant GenAIScript,
      `write a script that summarizes a video`.
    </li>
  </ol>
</Steps>

Comme l'invite injecte la documentation compl√®te de GenAIScript (plus de 700 ko au moment de la r√©daction),
il est recommand√© d'utiliser un mod√®le avec un grand contexte comme Sonnet ou Gemini.

N'oubliez pas non plus que la conversation enti√®re est renvoy√©e √† chaque it√©ration, cette technique
fonctionne donc mieux pour une requ√™te d√©taill√©e en une seule fois.
