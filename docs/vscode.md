# Visual Studio Code Extension

## User experience

This diagram demonstrates the AI-enhanced workflow process in gptools. The gpspec starts the `gptool`, which reads the `gpspec`, interacts with the gpvm and foundation model.
The AI-generated output is used to update the workspace, and the user interacts with the updated workspace through the gptools extension to VS code.

```mermaid
sequenceDiagram
participant User
participant VSCode
participant gpspec
participant gptool
participant gpvm
User->>VSCode: Create/Edit gpspec
VSCode->>gpspec: Save gpspec
User->>VSCode: Invoke gptool
VSCode->>gptool: Execute gptool with gpspec + workspace
gptool->>gpvm: Request foundation model execution
gpvm->>gptool: Return AI-generated output
gptool->>VSCode: Update workspace with output
VSCode->>User: Display updated workspace
```

## Copilot Chat integration

GPTools is exposed as the `@gptools` agent in Copilot Chat, each `gptool` is exposed as a slash command
using the tool id, e.g. the file name.

For example, to run the `front-matter` tool on the current file, type in the Copilot chat:

```bash
@gptool /front-matter
```

** Note: Copilot Chat is currently a proposed API and requires Visual Studio Code Insiders. **

When invoked from Copilot Chat, the `env.chat` variable is populated and contains the history of messages
and the prompt passed by the user after the slash command.

## Getting started

### Install in Visual Studio Code

These are the instructions to install the latest build of the extension manually in Visual Studio Code.

-   install [Visual Studio Code](https://code.visualstudio.com/Download) or [Visual Studio Code Insiders](https://code.visualstudio.com/insiders/. The Insiders version gives you access the Copilot Chat integration.
-   open the [latest release](https://github.com/microsoft/gptools/releases/latest/),
-   download the `gptools.vsix` file (`gptools.insiders.vsix` for Insiders) into your project
-   open Visual Studio Code
-   right click on the `.vsix` file and select **Install Extension VSIX...**

Until this extension is in the Marketplace, you will have to repeat these steps each time you want to upgrade the extension.

### Try a builtin tool

GPTools comes with sample tools and you don't need a gpspec to run those tools on any file. The easiest way to start playing with GPTools is to:

-   open a folder in Visual Studio Code
-   open any file, open the context menu and run "Run GPTool..."
-   select one of the builtin tools in the dropdown

### Create a gpspec

The default gpspec generated by GPTools is rather simplistic. You can improve the performance of the LLM
by creating a new gpspec with more instructions.

### Fork a tool

-   open the command palette
-   type "Fork a GPTool..." and select the tool you want to fork
-   pick a new name and start editing the tool

The tool will be available in the dropdown of the "Run GPTool..." command.
