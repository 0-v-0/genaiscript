<!DOCTYPE html><html lang="fr" dir="ltr" data-theme="dark" data-has-toc data-has-sidebar class="astro-xqcezzus"> <head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Commenter | GenAIScript</title><link rel="canonical" href="https://microsoft.github.io/genaiscript/fr/samples/cmt/"/><link rel="alternate" hreflang="en" href="https://microsoft.github.io/genaiscript/samples/cmt/"/><link rel="alternate" hreflang="fr" href="https://microsoft.github.io/genaiscript/fr/samples/cmt/"/><link rel="sitemap" href="/genaiscript/sitemap-index.xml"/><link href="https://microsoft.github.io/genaiscript/blog/rss.xml" rel="alternate" title="Blog" type="application/rss+xml"/><link rel="shortcut icon" href="/genaiscript/images/favicon.png" type="image/png"/><meta name="generator" content="Astro v5.11.0"/><meta name="generator" content="Starlight v0.34.4"/><meta property="og:title" content="Commenter"/><meta property="og:type" content="article"/><meta property="og:url" content="https://microsoft.github.io/genaiscript/fr/samples/cmt/"/><meta property="og:locale" content="fr"/><meta property="og:description" content="Ajoute des commentaires à votre code"/><meta property="og:site_name" content="GenAIScript"/><meta name="twitter:card" content="summary_large_image"/><meta name="description" content="Ajoute des commentaires à votre code"/> <link href="https://microsoft.github.io/genaiscript/llms.txt" rel="llms-txt" type="text/markdown"> <link href="https://microsoft.github.io/genaiscript/fr/samples/cmt.md" rel="alternate" type="text/markdown"> <script>
	window.StarlightThemeProvider = (() => {
		const storedTheme =
			typeof localStorage !== 'undefined' && localStorage.getItem('starlight-theme');
		const theme =
			storedTheme ||
			(window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark');
		document.documentElement.dataset.theme = theme === 'light' ? 'light' : 'dark';
		return {
			updatePickers(theme = storedTheme || 'auto') {
				document.querySelectorAll('starlight-theme-select').forEach((picker) => {
					const select = picker.querySelector('select');
					if (select) select.value = theme;
					/** @type {HTMLTemplateElement | null} */
					const tmpl = document.querySelector(`#theme-icons`);
					const newIcon = tmpl && tmpl.content.querySelector('.' + theme);
					if (newIcon) {
						const oldIcon = picker.querySelector('svg.label-icon');
						if (oldIcon) {
							oldIcon.replaceChildren(...newIcon.cloneNode(true).childNodes);
						}
					}
				});
			},
		};
	})();
</script><template id="theme-icons"><svg aria-hidden="true" class="light astro-bq6csbgl" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M5 12a1 1 0 0 0-1-1H3a1 1 0 0 0 0 2h1a1 1 0 0 0 1-1Zm.64 5-.71.71a1 1 0 0 0 0 1.41 1 1 0 0 0 1.41 0l.71-.71A1 1 0 0 0 5.64 17ZM12 5a1 1 0 0 0 1-1V3a1 1 0 0 0-2 0v1a1 1 0 0 0 1 1Zm5.66 2.34a1 1 0 0 0 .7-.29l.71-.71a1 1 0 1 0-1.41-1.41l-.66.71a1 1 0 0 0 0 1.41 1 1 0 0 0 .66.29Zm-12-.29a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.71-.71a1.004 1.004 0 1 0-1.43 1.41l.73.71ZM21 11h-1a1 1 0 0 0 0 2h1a1 1 0 0 0 0-2Zm-2.64 6A1 1 0 0 0 17 18.36l.71.71a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.76-.66ZM12 6.5a5.5 5.5 0 1 0 5.5 5.5A5.51 5.51 0 0 0 12 6.5Zm0 9a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7Zm0 3.5a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1a1 1 0 0 0-1-1Z"/></svg><svg aria-hidden="true" class="dark astro-bq6csbgl" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.64 13a1 1 0 0 0-1.05-.14 8.049 8.049 0 0 1-3.37.73 8.15 8.15 0 0 1-8.14-8.1 8.59 8.59 0 0 1 .25-2A1 1 0 0 0 8 2.36a10.14 10.14 0 1 0 14 11.69 1 1 0 0 0-.36-1.05Zm-9.5 6.69A8.14 8.14 0 0 1 7.08 5.22v.27a10.15 10.15 0 0 0 10.14 10.14 9.784 9.784 0 0 0 2.1-.22 8.11 8.11 0 0 1-7.18 4.32v-.04Z"/></svg><svg aria-hidden="true" class="auto astro-bq6csbgl" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg></template><link rel="stylesheet" href="/genaiscript/_astro/print.DNXP8c50.css" media="print"><link rel="stylesheet" href="/genaiscript/_astro/Authors.CcSrn0tq.css">
<style>@layer starlight.components{:root{--sl-badge-default-border: var(--sl-color-accent);--sl-badge-default-bg: var(--sl-color-accent-low);--sl-badge-default-text: #fff;--sl-badge-note-border: var(--sl-color-blue);--sl-badge-note-bg: var(--sl-color-blue-low);--sl-badge-note-text: #fff;--sl-badge-danger-border: var(--sl-color-red);--sl-badge-danger-bg: var(--sl-color-red-low);--sl-badge-danger-text: #fff;--sl-badge-success-border: var(--sl-color-green);--sl-badge-success-bg: var(--sl-color-green-low);--sl-badge-success-text: #fff;--sl-badge-caution-border: var(--sl-color-orange);--sl-badge-caution-bg: var(--sl-color-orange-low);--sl-badge-caution-text: #fff;--sl-badge-tip-border: var(--sl-color-purple);--sl-badge-tip-bg: var(--sl-color-purple-low);--sl-badge-tip-text: #fff}[data-theme=light]:root{--sl-badge-default-bg: var(--sl-color-accent-high);--sl-badge-note-bg: var(--sl-color-blue-high);--sl-badge-danger-bg: var(--sl-color-red-high);--sl-badge-success-bg: var(--sl-color-green-high);--sl-badge-caution-bg: var(--sl-color-orange-high);--sl-badge-tip-bg: var(--sl-color-purple-high)}.sl-badge:where(.astro-jkdjoadd){display:inline-block;border:1px solid var(--sl-color-border-badge);border-radius:.25rem;font-family:var(--sl-font-system-mono);line-height:normal;color:var(--sl-color-text-badge);background-color:var(--sl-color-bg-badge);overflow-wrap:anywhere}.sidebar-content .sl-badge:where(.astro-jkdjoadd){line-height:1;font-size:var(--sl-text-xs);padding:.125rem .375rem}.sidebar-content a[aria-current=page]>.sl-badge:where(.astro-jkdjoadd){--sl-color-bg-badge: transparent;--sl-color-border-badge: currentColor;color:inherit}.default:where(.astro-jkdjoadd){--sl-color-bg-badge: var(--sl-badge-default-bg);--sl-color-border-badge: var(--sl-badge-default-border);--sl-color-text-badge: var(--sl-badge-default-text)}.note:where(.astro-jkdjoadd){--sl-color-bg-badge: var(--sl-badge-note-bg);--sl-color-border-badge: var(--sl-badge-note-border);--sl-color-text-badge: var(--sl-badge-note-text)}.danger:where(.astro-jkdjoadd){--sl-color-bg-badge: var(--sl-badge-danger-bg);--sl-color-border-badge: var(--sl-badge-danger-border);--sl-color-text-badge: var(--sl-badge-danger-text)}.success:where(.astro-jkdjoadd){--sl-color-bg-badge: var(--sl-badge-success-bg);--sl-color-border-badge: var(--sl-badge-success-border);--sl-color-text-badge: var(--sl-badge-success-text)}.tip:where(.astro-jkdjoadd){--sl-color-bg-badge: var(--sl-badge-tip-bg);--sl-color-border-badge: var(--sl-badge-tip-border);--sl-color-text-badge: var(--sl-badge-tip-text)}.caution:where(.astro-jkdjoadd){--sl-color-bg-badge: var(--sl-badge-caution-bg);--sl-color-border-badge: var(--sl-badge-caution-border);--sl-color-text-badge: var(--sl-badge-caution-text)}.small:where(.astro-jkdjoadd){font-size:var(--sl-text-xs);padding:.125rem .25rem}.medium:where(.astro-jkdjoadd){font-size:var(--sl-text-sm);padding:.175rem .35rem}.large:where(.astro-jkdjoadd){font-size:var(--sl-text-base);padding:.225rem .45rem}.sl-markdown-content :is(h1,h2,h3,h4,h5,h6) .sl-badge:where(.astro-jkdjoadd){vertical-align:middle}}
@layer starlight.components{.card-grid:where(.astro-ymfibcsc){display:grid;grid-template-columns:100%;gap:1rem}.card-grid:where(.astro-ymfibcsc)>*{margin-top:0!important}@media (min-width: 50rem){.card-grid:where(.astro-ymfibcsc){grid-template-columns:1fr 1fr;gap:1.5rem}.stagger:where(.astro-ymfibcsc){--stagger-height: 5rem;padding-bottom:var(--stagger-height)}.stagger:where(.astro-ymfibcsc)>*:nth-child(2n){transform:translateY(var(--stagger-height))}}}
@layer starlight.components{.card:where(.astro-fe7tce6e){--sl-card-border: var(--sl-color-purple);--sl-card-bg: var(--sl-color-purple-low);border:1px solid var(--sl-color-gray-5);background-color:var(--sl-color-black);padding:clamp(1rem,calc(.125rem + 3vw),2.5rem);flex-direction:column;gap:clamp(.5rem,calc(.125rem + 1vw),1rem)}.card:where(.astro-fe7tce6e):nth-child(4n+1){--sl-card-border: var(--sl-color-orange);--sl-card-bg: var(--sl-color-orange-low)}.card:where(.astro-fe7tce6e):nth-child(4n+3){--sl-card-border: var(--sl-color-green);--sl-card-bg: var(--sl-color-green-low)}.card:where(.astro-fe7tce6e):nth-child(4n+4){--sl-card-border: var(--sl-color-red);--sl-card-bg: var(--sl-color-red-low)}.card:where(.astro-fe7tce6e):nth-child(4n+5){--sl-card-border: var(--sl-color-blue);--sl-card-bg: var(--sl-color-blue-low)}.title:where(.astro-fe7tce6e){font-weight:600;font-size:var(--sl-text-h4);color:var(--sl-color-white);line-height:var(--sl-line-height-headings);gap:1rem;align-items:center}.card:where(.astro-fe7tce6e) .icon:where(.astro-fe7tce6e){border:1px solid var(--sl-card-border);background-color:var(--sl-card-bg);padding:.2em;border-radius:.25rem;flex-shrink:0}.card:where(.astro-fe7tce6e) .body:where(.astro-fe7tce6e){margin:0;font-size:clamp(var(--sl-text-sm),calc(.5rem + 1vw),var(--sl-text-body))}}
@layer starlight.components{svg:where(.astro-bq6csbgl){color:var(--sl-icon-color);font-size:var(--sl-icon-size, 1em);width:1em;height:1em}}
@layer starlight.components{starlight-tabs:where(.astro-jw7ocou4){display:block}.tablist-wrapper:where(.astro-jw7ocou4){overflow-x:auto}:where(.astro-jw7ocou4)[role=tablist]{display:flex;list-style:none;border-bottom:2px solid var(--sl-color-gray-5);padding:0}.tab:where(.astro-jw7ocou4){margin-bottom:-2px}.tab:where(.astro-jw7ocou4)>:where(.astro-jw7ocou4)[role=tab]{display:flex;align-items:center;gap:.5rem;padding:0 1.25rem;text-decoration:none;border-bottom:2px solid var(--sl-color-gray-5);color:var(--sl-color-gray-3);outline-offset:var(--sl-outline-offset-inside);overflow-wrap:initial}.tab:where(.astro-jw7ocou4) :where(.astro-jw7ocou4)[role=tab][aria-selected=true]{color:var(--sl-color-white);border-color:var(--sl-color-text-accent);font-weight:600}.tablist-wrapper:where(.astro-jw7ocou4)~[role=tabpanel]{margin-top:1rem}}
@layer starlight.components{.sl-link-card:where(.astro-7m3pweiq){display:grid;grid-template-columns:1fr auto;gap:.5rem;border:1px solid var(--sl-color-gray-5);border-radius:.5rem;padding:1rem;box-shadow:var(--sl-shadow-sm);position:relative}a:where(.astro-7m3pweiq){text-decoration:none;line-height:var(--sl-line-height-headings)}a:where(.astro-7m3pweiq):before{content:"";position:absolute;inset:0}.stack:where(.astro-7m3pweiq){flex-direction:column;gap:.5rem}.title:where(.astro-7m3pweiq){color:var(--sl-color-white);font-weight:600;font-size:var(--sl-text-lg)}.description:where(.astro-7m3pweiq){color:var(--sl-color-gray-3);line-height:1.5}.icon:where(.astro-7m3pweiq){color:var(--sl-color-gray-3)}.sl-link-card:where(.astro-7m3pweiq):hover{background:var(--sl-color-gray-7, var(--sl-color-gray-6));border-color:var(--sl-color-gray-2)}.sl-link-card:where(.astro-7m3pweiq):hover .icon:where(.astro-7m3pweiq){color:var(--sl-color-white)}}
@layer starlight.components{.sl-steps{--bullet-size: calc(var(--sl-line-height) * 1rem);--bullet-margin: .375rem;list-style:none;counter-reset:steps-counter var(--sl-steps-start, 0);padding-inline-start:0}.sl-steps>li{counter-increment:steps-counter;position:relative;padding-inline-start:calc(var(--bullet-size) + 1rem);padding-bottom:1px;min-height:calc(var(--bullet-size) + var(--bullet-margin))}.sl-steps>li+li{margin-top:0}.sl-steps>li:before{content:counter(steps-counter);position:absolute;top:0;inset-inline-start:0;width:var(--bullet-size);height:var(--bullet-size);line-height:var(--bullet-size);font-size:var(--sl-text-xs);font-weight:600;text-align:center;color:var(--sl-color-white);background-color:var(--sl-color-gray-6);border-radius:99rem;box-shadow:inset 0 0 0 1px var(--sl-color-gray-5)}.sl-steps>li:after{--guide-width: 1px;content:"";position:absolute;top:calc(var(--bullet-size) + var(--bullet-margin));bottom:var(--bullet-margin);inset-inline-start:calc((var(--bullet-size) - var(--guide-width)) / 2);width:var(--guide-width);background-color:var(--sl-color-hairline-light)}}@layer starlight.content{.sl-steps>li>:first-child{--lh: calc(1em * var(--sl-line-height));--shift-y: calc(.5 * (var(--bullet-size) - var(--lh)));transform:translateY(var(--shift-y));margin-bottom:var(--shift-y)}.sl-steps>li>:first-child:where(h1,h2,h3,h4,h5,h6){--lh: calc(1em * var(--sl-line-height-headings))}@supports (--prop: 1lh){.sl-steps>li>:first-child{--lh: 1lh}}}
@layer starlight.components{starlight-file-tree:where(.astro-doil54im){--x-space: 1.5rem;--y-space: .125rem;--y-pad: 0;display:block;border:1px solid var(--sl-color-gray-5);padding:1rem;background-color:var(--sl-color-gray-6);font-size:var(--sl-text-xs);font-family:var(--__sl-font-mono);overflow-x:auto}starlight-file-tree:where(.astro-doil54im) .directory>details{border:0;padding:0;padding-inline-start:var(--x-space);background:transparent}starlight-file-tree:where(.astro-doil54im) .directory>details>summary{margin-inline-start:calc(-1 * var(--x-space));border:0;padding:var(--y-pad) .625rem;font-weight:400;color:var(--sl-color-white);max-width:100%}starlight-file-tree:where(.astro-doil54im) .directory>details>summary::marker,starlight-file-tree:where(.astro-doil54im) .directory>details>summary::-webkit-details-marker{color:var(--sl-color-gray-3)}starlight-file-tree:where(.astro-doil54im) .directory>details>summary:hover,starlight-file-tree:where(.astro-doil54im) .directory>details>summary:hover .tree-icon{cursor:pointer;color:var(--sl-color-text-accent);fill:currentColor}starlight-file-tree:where(.astro-doil54im) .directory>details>summary:hover~ul{border-color:var(--sl-color-gray-4)}starlight-file-tree:where(.astro-doil54im) .directory>details>summary:hover .highlight .tree-icon{color:var(--sl-color-text-invert);fill:currentColor}starlight-file-tree:where(.astro-doil54im) ul{margin-inline-start:.5rem;border-inline-start:1px solid var(--sl-color-gray-5);padding:0;padding-inline-start:.125rem;list-style:none}starlight-file-tree:where(.astro-doil54im)>ul{margin:0;border:0;padding:0}starlight-file-tree:where(.astro-doil54im) li{margin:var(--y-space) 0;padding:var(--y-pad) 0}starlight-file-tree:where(.astro-doil54im) .file{margin-inline-start:calc(var(--x-space) - .125rem);color:var(--sl-color-white)}starlight-file-tree:where(.astro-doil54im) .tree-entry{display:inline-flex;align-items:flex-start;flex-wrap:wrap;max-width:calc(100% - 1rem)}@media (min-width: 30em){starlight-file-tree:where(.astro-doil54im) .tree-entry{flex-wrap:nowrap}}starlight-file-tree:where(.astro-doil54im) .tree-entry>:first-child{flex-shrink:0}starlight-file-tree:where(.astro-doil54im) .empty{color:var(--sl-color-gray-3);padding-inline-start:.375rem}starlight-file-tree:where(.astro-doil54im) .comment{color:var(--sl-color-gray-3);padding-inline-start:1.625rem;max-width:24rem;min-width:12rem}starlight-file-tree:where(.astro-doil54im) .highlight{display:inline-block;border-radius:.25rem;padding-inline-end:.5rem;color:var(--sl-color-text-invert);background-color:var(--sl-color-text-accent)}starlight-file-tree:where(.astro-doil54im) svg{display:inline;fill:var(--sl-color-gray-3);vertical-align:middle;margin-inline:.25rem .375rem;width:.875rem;height:.875rem}starlight-file-tree:where(.astro-doil54im) .highlight svg.tree-icon{fill:currentColor}}
@layer starlight.components{.sl-link-button:where(.astro-rnzosx4f){align-items:center;border:1px solid transparent;border-radius:999rem;display:inline-flex;font-size:var(--sl-text-sm);gap:.5em;line-height:1.1875;outline-offset:.25rem;padding:.4375rem 1.125rem;text-decoration:none}.sl-link-button:where(.astro-rnzosx4f).primary{background:var(--sl-color-text-accent);border-color:var(--sl-color-text-accent);color:var(--sl-color-black)}.sl-link-button:where(.astro-rnzosx4f).primary:hover{color:var(--sl-color-black)}.sl-link-button:where(.astro-rnzosx4f).secondary{border-color:inherit;color:var(--sl-color-white)}.sl-link-button:where(.astro-rnzosx4f).minimal{color:var(--sl-color-white);padding-inline:0}.sl-link-button:where(.astro-rnzosx4f) svg{flex-shrink:0}@media (min-width: 50rem){.sl-link-button:where(.astro-rnzosx4f){font-size:var(--sl-text-base);padding:.9375rem 1.25rem}}.sl-markdown-content .sl-link-button:where(.astro-rnzosx4f){margin-inline-end:1rem}.sl-markdown-content .sl-link-button:where(.astro-rnzosx4f):not(:where(p *)){margin-block:1rem}}
</style><script type="module" src="/genaiscript/_astro/page.7qqag-5g.js"></script></head> <body class="astro-xqcezzus"> <a href="#_top" class="astro-7uuznfpb">Aller au contenu</a>  <div class="page sl-flex astro-w64kkxlm"> <header class="header astro-w64kkxlm"><div class="header astro-ibjlrj3y"> <div class="title-wrapper sl-flex astro-ibjlrj3y"> <a href="/genaiscript/fr" class="site-title sl-flex astro-jvevelow">  <img class="astro-jvevelow" alt src="/genaiscript/_astro/logo.C7y7Xksc.svg" width="630" height="630">  <span class="astro-jvevelow" translate="no"> GenAIScript </span> </a>  </div> <div class="sl-flex print:hidden astro-ibjlrj3y"> <site-search class="astro-ibjlrj3y astro-c6yrggpy" data-translations="{&#34;placeholder&#34;:&#34;Rechercher&#34;}"> <button data-open-modal disabled aria-label="Rechercher" aria-keyshortcuts="Control+K" class="astro-c6yrggpy"> <svg aria-hidden="true" class="astro-c6yrggpy astro-bq6csbgl" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.71 20.29 18 16.61A9 9 0 1 0 16.61 18l3.68 3.68a.999.999 0 0 0 1.42 0 1 1 0 0 0 0-1.39ZM11 18a7 7 0 1 1 0-14 7 7 0 0 1 0 14Z"/></svg> <span class="sl-hidden md:sl-block astro-c6yrggpy" aria-hidden="true">Rechercher</span> <kbd class="sl-hidden md:sl-flex astro-c6yrggpy" style="display: none;"> <kbd class="astro-c6yrggpy">Ctrl</kbd><kbd class="astro-c6yrggpy">K</kbd> </kbd> </button> <dialog style="padding:0" aria-label="Rechercher" class="astro-c6yrggpy"> <div class="dialog-frame sl-flex astro-c6yrggpy">  <button data-close-modal class="sl-flex md:sl-hidden astro-c6yrggpy"> Annuler </button> <div class="search-container astro-c6yrggpy"> <div id="starlight__search" class="astro-c6yrggpy"></div> </div> </div> </dialog> </site-search>  <script>
	(() => {
		const openBtn = document.querySelector('button[data-open-modal]');
		const shortcut = openBtn?.querySelector('kbd');
		if (!openBtn || !(shortcut instanceof HTMLElement)) return;
		const platformKey = shortcut.querySelector('kbd');
		if (platformKey && /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)) {
			platformKey.textContent = '⌘';
			openBtn.setAttribute('aria-keyshortcuts', 'Meta+K');
		}
		shortcut.style.display = '';
	})();
</script> <script type="module" src="/genaiscript/_astro/Search.astro_astro_type_script_index_0_lang.ZFrA6PJ9.js"></script>   </div> <div class="sl-hidden md:sl-flex print:hidden right-group astro-ibjlrj3y"> <div class="sl-flex social-icons astro-ibjlrj3y"> <a href="https://discord.gg/y7HpumjHeB" rel="me" class="sl-flex astro-s5lj4ku5"><span class="sr-only astro-s5lj4ku5">Discord</span><svg aria-hidden="true" class="astro-s5lj4ku5 astro-bq6csbgl" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M20.32 4.37a19.8 19.8 0 0 0-4.93-1.51 13.78 13.78 0 0 0-.64 1.28 18.27 18.27 0 0 0-5.5 0 12.64 12.64 0 0 0-.64-1.28h-.05A19.74 19.74 0 0 0 3.64 4.4 20.26 20.26 0 0 0 .11 18.09l.02.02a19.9 19.9 0 0 0 6.04 3.03l.04-.02a14.24 14.24 0 0 0 1.23-2.03.08.08 0 0 0-.05-.07 13.1 13.1 0 0 1-1.9-.92.08.08 0 0 1 .02-.1 10.2 10.2 0 0 0 .41-.31h.04a14.2 14.2 0 0 0 12.1 0l.04.01a9.63 9.63 0 0 0 .4.32.08.08 0 0 1-.03.1 12.29 12.29 0 0 1-1.9.91.08.08 0 0 0-.02.1 15.97 15.97 0 0 0 1.27 2.01h.04a19.84 19.84 0 0 0 6.03-3.05v-.03a20.12 20.12 0 0 0-3.57-13.69ZM8.02 15.33c-1.18 0-2.16-1.08-2.16-2.42 0-1.33.96-2.42 2.16-2.42 1.21 0 2.18 1.1 2.16 2.42 0 1.34-.96 2.42-2.16 2.42Zm7.97 0c-1.18 0-2.15-1.08-2.15-2.42 0-1.33.95-2.42 2.15-2.42 1.22 0 2.18 1.1 2.16 2.42 0 1.34-.94 2.42-2.16 2.42Z"/></svg></a><a href="https://github.com/microsoft/genaiscript" rel="me" class="sl-flex astro-s5lj4ku5"><span class="sr-only astro-s5lj4ku5">GitHub</span><svg aria-hidden="true" class="astro-s5lj4ku5 astro-bq6csbgl" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg></a><a href="https://www.youtube.com/@pelihalleux" rel="me" class="sl-flex astro-s5lj4ku5"><span class="sr-only astro-s5lj4ku5">YouTube</span><svg aria-hidden="true" class="astro-s5lj4ku5 astro-bq6csbgl" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M23.5 6.2A3 3 0 0 0 21.4 4c-1.9-.5-9.4-.5-9.4-.5s-7.5 0-9.4.5A3 3 0 0 0 .5 6.3C0 8 0 12 0 12s0 4 .5 5.8A3 3 0 0 0 2.6 20c1.9.6 9.4.6 9.4.6s7.5 0 9.4-.6a3 3 0 0 0 2.1-2c.5-2 .5-5.9.5-5.9s0-4-.5-5.8zm-14 9.4V8.4l6.3 3.6-6.3 3.6z"/></svg></a><a href="https://microsoft.github.io/genaiscript/blog/rss.xml" rel="me" class="sl-flex astro-s5lj4ku5"><span class="sr-only astro-s5lj4ku5">RSS</span><svg aria-hidden="true" class="astro-s5lj4ku5 astro-bq6csbgl" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M2.88 16.88a3 3 0 0 0 0 4.24 3 3 0 0 0 4.24 0 3 3 0 0 0-4.24-4.24Zm2.83 2.83a1 1 0 0 1-1.42-1.42 1 1 0 0 1 1.42 0 1 1 0 0 1 0 1.42ZM5 12a1 1 0 0 0 0 2 5 5 0 0 1 5 5 1 1 0 0 0 2 0 7 7 0 0 0-7-7Zm0-4a1 1 0 0 0 0 2 9 9 0 0 1 9 9 1 1 0 0 0 2 0 11.08 11.08 0 0 0-3.22-7.78A11.08 11.08 0 0 0 5 8Zm10.61.39A15.11 15.11 0 0 0 5 4a1 1 0 0 0 0 2 13 13 0 0 1 13 13 1 1 0 0 0 2 0 15.11 15.11 0 0 0-4.39-10.61Z"/></svg></a> </div> <div class="astro-7ggugoi7"> <a href="/genaiscript/fr/blog/" class="astro-7ggugoi7">Blog</a> </div>  <starlight-theme-select>  <label style="--sl-select-width: 6.25em" class="astro-bs72fung"> <span class="sr-only astro-bs72fung">Selectionner le thème</span> <svg aria-hidden="true" class="icon label-icon astro-bs72fung astro-bq6csbgl" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg> <select value="auto" autocomplete="off" class="astro-bs72fung"> <option value="dark" class="astro-bs72fung">Sombre</option><option value="light" class="astro-bs72fung">Clair</option><option value="auto" selected class="astro-bs72fung">Auto</option> </select> <svg aria-hidden="true" class="icon caret astro-bs72fung astro-bq6csbgl" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg> </label>  </starlight-theme-select>  <script>
	StarlightThemeProvider.updatePickers();
</script> <script type="module">const r="starlight-theme",o=e=>e==="auto"||e==="dark"||e==="light"?e:"auto",c=()=>o(typeof localStorage<"u"&&localStorage.getItem(r));function n(e){typeof localStorage<"u"&&localStorage.setItem(r,e==="light"||e==="dark"?e:"")}const l=()=>matchMedia("(prefers-color-scheme: light)").matches?"light":"dark";function t(e){StarlightThemeProvider.updatePickers(e),document.documentElement.dataset.theme=e==="auto"?l():e,n(e)}matchMedia("(prefers-color-scheme: light)").addEventListener("change",()=>{c()==="auto"&&t("auto")});class s extends HTMLElement{constructor(){super(),t(c()),this.querySelector("select")?.addEventListener("change",a=>{a.currentTarget instanceof HTMLSelectElement&&t(o(a.currentTarget.value))})}}customElements.define("starlight-theme-select",s);</script> <starlight-lang-select><label style="--sl-select-width: 7em" class="astro-bs72fung"> <span class="sr-only astro-bs72fung">Selectionner la langue</span> <svg aria-hidden="true" class="icon label-icon astro-bs72fung astro-bq6csbgl" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path fill-rule="evenodd" d="M8.516 3a.94.94 0 0 0-.941.94v1.15H2.94a.94.94 0 1 0 0 1.882h7.362a7.422 7.422 0 0 1-1.787 3.958 7.42 7.42 0 0 1-1.422-2.425.94.94 0 1 0-1.774.627 9.303 9.303 0 0 0 1.785 3.043 7.422 7.422 0 0 1-4.164 1.278.94.94 0 1 0 0 1.881 9.303 9.303 0 0 0 5.575-1.855 9.303 9.303 0 0 0 4.11 1.74l-.763 1.525a.968.968 0 0 0-.016.034l-1.385 2.77a.94.94 0 1 0 1.683.841l1.133-2.267h5.806l1.134 2.267a.94.94 0 0 0 1.683-.841l-1.385-2.769a.95.95 0 0 0-.018-.036l-3.476-6.951a.94.94 0 0 0-1.682 0l-1.82 3.639a7.423 7.423 0 0 1-3.593-1.256 9.303 9.303 0 0 0 2.27-5.203h1.894a.94.94 0 0 0 0-1.881H9.456V3.94A.94.94 0 0 0 8.516 3Zm6.426 11.794a1.068 1.068 0 0 1-.02.039l-.703 1.407h3.924l-1.962-3.924-1.24 2.478Z" clip-rule="evenodd"/></svg> <select value="/genaiscript/fr/samples/cmt/" autocomplete="off" class="astro-bs72fung"> <option value="/genaiscript/samples/cmt/" class="astro-bs72fung">English</option><option value="/genaiscript/fr/samples/cmt/" selected class="astro-bs72fung">French</option> </select> <svg aria-hidden="true" class="icon caret astro-bs72fung astro-bq6csbgl" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg> </label> </starlight-lang-select><script type="module">class s extends HTMLElement{constructor(){super();const e=this.querySelector("select");e&&(e.addEventListener("change",t=>{t.currentTarget instanceof HTMLSelectElement&&(window.location.pathname=t.currentTarget.value)}),window.addEventListener("pageshow",t=>{if(!t.persisted)return;const n=e.querySelector("option[selected]")?.index;n!==e.selectedIndex&&(e.selectedIndex=n??0)}))}}customElements.define("starlight-lang-select",s);</script> </div> </div> </header> <nav class="sidebar print:hidden astro-w64kkxlm" aria-label="principale"> <starlight-menu-button class="print:hidden astro-3wm6tn25"> <button aria-expanded="false" aria-label="Menu" aria-controls="starlight__sidebar" class="sl-flex md:sl-hidden astro-3wm6tn25"> <svg aria-hidden="true" class="open-menu astro-3wm6tn25 astro-bq6csbgl" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M3 8h18a1 1 0 1 0 0-2H3a1 1 0 0 0 0 2Zm18 8H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Zm0-5H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Z"/></svg> <svg aria-hidden="true" class="close-menu astro-3wm6tn25 astro-bq6csbgl" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="m13.41 12 6.3-6.29a1.004 1.004 0 1 0-1.42-1.42L12 10.59l-6.29-6.3a1.004 1.004 0 0 0-1.42 1.42l6.3 6.29-6.3 6.29a1 1 0 0 0 0 1.42.998.998 0 0 0 1.42 0l6.29-6.3 6.29 6.3a.999.999 0 0 0 1.42 0 1 1 0 0 0 0-1.42L13.41 12Z"/></svg> </button> </starlight-menu-button> <script type="module">class s extends HTMLElement{constructor(){super(),this.btn=this.querySelector("button"),this.btn.addEventListener("click",()=>this.toggleExpanded());const t=this.closest("nav");t&&t.addEventListener("keyup",e=>this.closeOnEscape(e))}setExpanded(t){this.setAttribute("aria-expanded",String(t)),document.body.toggleAttribute("data-mobile-menu-expanded",t)}toggleExpanded(){this.setExpanded(this.getAttribute("aria-expanded")!=="true")}closeOnEscape(t){t.code==="Escape"&&(this.setExpanded(!1),this.btn.focus())}}customElements.define("starlight-menu-button",s);</script>   <div id="starlight__sidebar" class="sidebar-pane astro-w64kkxlm"> <div class="sidebar-content sl-flex astro-w64kkxlm"> <sl-sidebar-state-persist data-hash="1aajwxu" class="astro-3d5allzr"> <script aria-hidden="true">
		(() => {
			try {
				if (!matchMedia('(min-width: 50em)').matches) return;
				/** @type {HTMLElement | null} */
				const target = document.querySelector('sl-sidebar-state-persist');
				const state = JSON.parse(sessionStorage.getItem('sl-sidebar-state') || '0');
				if (!target || !state || target.dataset.hash !== state.hash) return;
				window._starlightScrollRestore = state.scroll;
				customElements.define(
					'sl-sidebar-restore',
					class SidebarRestore extends HTMLElement {
						connectedCallback() {
							try {
								const idx = parseInt(this.dataset.index || '');
								const details = this.closest('details');
								if (details && typeof state.open[idx] === 'boolean') details.open = state.open[idx];
							} catch {}
						}
					}
				);
			} catch {}
		})();
	</script>  <ul class="top-level astro-jvjwaqcl"> <li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/blog/" aria-current="false" class="large sl-blog-mobile-link astro-jvjwaqcl" class="sl-blog-mobile-link"> <span class="astro-jvjwaqcl">Blog</span>  </a> </li><li class="astro-jvjwaqcl"> <details open class="astro-jvjwaqcl"> <sl-sidebar-restore data-index="0"></sl-sidebar-restore> <summary class="astro-jvjwaqcl"> <div class="group-label astro-jvjwaqcl"> <span class="large astro-jvjwaqcl">Start Here</span>  </div> <svg aria-hidden="true" class="caret astro-jvjwaqcl astro-bq6csbgl" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <ul class="astro-jvjwaqcl"> <li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/getting-started/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Commencer</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/getting-started/installation/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Installation</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/getting-started/configuration/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Configuration</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/getting-started/your-first-genai-script/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Votre premier script GenAI</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/getting-started/running-scripts/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Exécution des scripts</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/getting-started/debugging-scripts/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Débogage des scripts</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/getting-started/testing-scripts/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Test des scripts</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/getting-started/automating-scripts/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Automatisation des scripts</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/getting-started/best-practices/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Meilleures pratiques</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/getting-started/tutorial/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Carnet de tutoriel</span>  </a> </li> </ul>  </details> </li><li class="astro-jvjwaqcl"> <details class="astro-jvjwaqcl"> <sl-sidebar-restore data-index="1"></sl-sidebar-restore> <summary class="astro-jvjwaqcl"> <div class="group-label astro-jvjwaqcl"> <span class="large astro-jvjwaqcl">Configuration</span>  </div> <svg aria-hidden="true" class="caret astro-jvjwaqcl astro-bq6csbgl" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <ul class="astro-jvjwaqcl"> <li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/configuration/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Aperçu</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/configuration/openai/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">OpenAI</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/configuration/github/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">GitHub Models</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/configuration/github-copilot-chat/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">GitHub Copilot Chat</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/configuration/azure-ai-foundry/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Azure AI Foundry</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/configuration/azure-openai/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Azure OpenAI</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/configuration/azure-ai-search/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Recherche IA Azure</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/configuration/anthropic/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Anthropic</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/configuration/anthropic-bedrock/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Anthropic Bedrock</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/configuration/huggingface/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Hugging Face</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/configuration/google/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Google AI</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/configuration/mistral/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Mistral IA</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/configuration/alibaba/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Alibaba Cloud</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/configuration/deepseek/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">DeepSeek</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/configuration/docker-model-runner/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Exécuteur de Modèle Docker</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/configuration/jan/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Le fournisseur `jan` se connecte au serveur local [Jan](https://jan.ai/).</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/configuration/litellm/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">LiteLLM</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/configuration/llamacpp/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">LLaMA.cpp</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/configuration/llamafile/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Llamafile</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/configuration/lmstudio/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">LM Studio</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/configuration/localai/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">LocalAI</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/configuration/ollama/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Ollama</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/configuration/openrouter/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">OpenRouter</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/configuration/sglang/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">SGLang</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/configuration/vllm/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">vLLM</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/configuration/windows/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Windows IA</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/configuration/whisperasr/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Whisper ASR WebServices</span>  </a> </li> </ul>  </details> </li><li class="astro-jvjwaqcl"> <details class="astro-jvjwaqcl"> <sl-sidebar-restore data-index="2"></sl-sidebar-restore> <summary class="astro-jvjwaqcl"> <div class="group-label astro-jvjwaqcl"> <span class="large astro-jvjwaqcl">Case Studies</span>  </div> <svg aria-hidden="true" class="caret astro-jvjwaqcl astro-bq6csbgl" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <ul class="astro-jvjwaqcl"> <li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/case-studies/bicep-best-practices/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Pratiques exemplaires pour Bicep</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/case-studies/seo-frontmatter/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Métadonnées SEO</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/case-studies/documentation-translations/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Traductions de la documentation</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/case-studies/blocks-localization/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Localisation des blocs</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/case-studies/release-notes/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Notes de version</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/case-studies/tla-ai-linter/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">TLA+ AI Linter</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/case-studies/image-alt-text/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Texte alternatif des images</span>  </a> </li> </ul>  </details> </li><li class="astro-jvjwaqcl"> <details open class="astro-jvjwaqcl"> <sl-sidebar-restore data-index="3"></sl-sidebar-restore> <summary class="astro-jvjwaqcl"> <div class="group-label astro-jvjwaqcl"> <span class="large astro-jvjwaqcl">Samples</span>  </div> <svg aria-hidden="true" class="caret astro-jvjwaqcl astro-bq6csbgl" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <ul class="astro-jvjwaqcl"> <li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/samples/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Aperçu</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/samples/awesome/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Scripts Géniaux</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/samples/diagram/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Diagramme</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/samples/lint/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Lint</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/samples/iat/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Image Alt Textify</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/samples/prd/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Descripteur de Pull Request</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/samples/prr/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Relecteur de Pull Request</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/samples/sc/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Checker orthographique</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/samples/gai/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Enquêteur GitHub Action</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/samples/gcm/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Message Git Commit</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/samples/st/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Recherche et transformation</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/samples/cmt/" aria-current="page" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Commenter</span>  </a> </li> </ul>  </details> </li><li class="astro-jvjwaqcl"> <details class="astro-jvjwaqcl"> <sl-sidebar-restore data-index="4"></sl-sidebar-restore> <summary class="astro-jvjwaqcl"> <div class="group-label astro-jvjwaqcl"> <span class="large astro-jvjwaqcl">Guides</span>  </div> <svg aria-hidden="true" class="caret astro-jvjwaqcl astro-bq6csbgl" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <ul class="astro-jvjwaqcl"> <li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/guides/prompt-as-code/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Invitez en tant que code</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/guides/ask-my-pdf/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Demander Mon PDF</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/guides/agentic-tools/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Outils Agentic</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/guides/ask-my-image/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Demandez à Mon Image</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/guides/detection-outdated-descriptions/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Détection des descriptions obsolètes</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/guides/present-my-code/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Présentez Mon Code</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/guides/search-and-fetch/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Recherche et récupération</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/guides/tool-agent/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Agent d&#39;Outil</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/guides/summarize-many-documents/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Résumer plusieurs documents</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/guides/containerized-tools/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Outils Conteneurisés</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/guides/deepseek/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">DeepSeek R1 et V3</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/guides/generated-knowledge/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Connaissance Générée</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/guides/phi3-with-ollama/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Phi-3 Mini with Ollama</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/guides/business-card-scanner/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Scanner de cartes de visite</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/guides/eval-models/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Évaluations avec plusieurs modèles</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/guides/auto-git-commit-message/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Messages automatisés de commit Git</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/guides/issue-reviewer/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Relecteur d&#39;issues</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/guides/llama-guard-your-files/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Llama Guard vos fichiers</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/guides/llm-agents/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Agents LLM</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/guides/search-and-transform/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Recherche et Transformation</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/guides/transformers-js/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Transformer.js</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/guides/using-secrets/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Utilisation des secrets</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/guides/video-alt-textgenai/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Video Alt Text</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/guides/images-in-azure-blob-storage/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Images dans Azure Blob Storage</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/guides/llm-as-tool/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">LLM comme un outil</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/guides/pdf-vision/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Vision PDF</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/guides/zod-schema/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Zod Schema</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/guides/sharing-scripts/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Partage de scripts</span>  </a> </li> </ul>  </details> </li><li class="astro-jvjwaqcl"> <details open class="astro-jvjwaqcl"> <sl-sidebar-restore data-index="5"></sl-sidebar-restore> <summary class="astro-jvjwaqcl"> <div class="group-label astro-jvjwaqcl"> <span class="large astro-jvjwaqcl">Reference</span>  </div> <svg aria-hidden="true" class="caret astro-jvjwaqcl astro-bq6csbgl" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <ul class="astro-jvjwaqcl"> <li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Aperçu</span>  </a> </li><li class="astro-jvjwaqcl"> <details open class="astro-jvjwaqcl"> <sl-sidebar-restore data-index="6"></sl-sidebar-restore> <summary class="astro-jvjwaqcl"> <div class="group-label astro-jvjwaqcl"> <span class="large astro-jvjwaqcl">scripts</span>  </div> <svg aria-hidden="true" class="caret astro-jvjwaqcl astro-bq6csbgl" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <ul class="astro-jvjwaqcl"> <li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Aperçu</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/metadata/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Métadonnées</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/prompt/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Invite ($)</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/context/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Contexte (env+def)</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/variables/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Variables</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/file-output/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Sortie de fichiers</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/tools/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Outils</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/mcp-tools/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Outils du protocole Model Context</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/mcp-server/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Serveur du Protocole de Contexte Modèle</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/mcp-clients/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Clients du protocole Model Context</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/schemas/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Schémas de données</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/agents/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Agents</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/docx/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">DOCX</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/pdf/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">PDF</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/xml/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">XML</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/md/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Markdown</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/images/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Images</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/inline-prompts/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Invite intégrées</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/retrieval/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Recherche</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/secret-scanning/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Analyse des secrets</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/system/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Invites Système</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/vector-search/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Recherche Vectorielle</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/videos/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Vidéos comme Entrées</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/annotations/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Annotations</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/file-merge/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Fusion de fichiers</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/tests/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Tests / Évaluations</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/redteam/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Équipe Rouge</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/custom-output/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Sortie personnalisée</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/parsers/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Analyseurs</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/structured-output/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Sorties structurées</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/files/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Fichiers</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/fetch/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Récupérer</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/cache/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Cache</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/cancel/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Annuler</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/diff/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Différences</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/output-builder/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Constructeur de sortie</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/typescript/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">TypeScript</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/web-search/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Recherche Web</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/secrets/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Secrets</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/yaml/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">YAML</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/csv/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">CSV</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/ini/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">INI</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/xlsx/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">XLSX</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/html/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">HTML</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/ast-grep/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">ast-grep</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/choices/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Choix</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/container/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Conteneurs</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/content-safety/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Sécurité du Contenu</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/diagrams/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Diagrammes</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/imports/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Importations</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/logging/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Journalisation</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/browser/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Automatisation du navigateur</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/transcription/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Transcription audio</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/image-generation/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Génération d&#39;images</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/chat-participants/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Participants au Chat</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/concurrency/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Concurrence</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/github/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">GitHub</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/import-template/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Importer un Modèle</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/logprobs/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">LogProbs</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/parameters/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Schéma des paramètres</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/git/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Git</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/prompty/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Prompty</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/model-aliases/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Alias de Modèles</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/pyodide/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Pyodide</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/tokenizers/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Tokeniseurs</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/prompt-caching/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Mise en cache des invites</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/teams/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Microsoft Teams</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/user-input/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Entrée Utilisateur</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/fence-formats/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Formats de clôture</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/notebook/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Bloc-notes</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/reasoning-models/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Modèles de Raisonnement</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/response-priming/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Mise en forme des réponses</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/scripts/stored-completions/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Complétions stockées</span>  </a> </li> </ul>  </details> </li><li class="astro-jvjwaqcl"> <details open class="astro-jvjwaqcl"> <sl-sidebar-restore data-index="7"></sl-sidebar-restore> <summary class="astro-jvjwaqcl"> <div class="group-label astro-jvjwaqcl"> <span class="large astro-jvjwaqcl">cli</span>  </div> <svg aria-hidden="true" class="caret astro-jvjwaqcl astro-bq6csbgl" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <ul class="astro-jvjwaqcl"> <li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/cli/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Aperçu</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/cli/run/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Exécuter</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/cli/convert/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Convertir</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/cli/serve/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Serve</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/cli/video/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Vidéo</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/cli/test/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Test</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/cli/configure/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Configure</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/cli/commands/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Commandes</span>  </a> </li> </ul>  </details> </li><li class="astro-jvjwaqcl"> <details open class="astro-jvjwaqcl"> <sl-sidebar-restore data-index="8"></sl-sidebar-restore> <summary class="astro-jvjwaqcl"> <div class="group-label astro-jvjwaqcl"> <span class="large astro-jvjwaqcl">api</span>  </div> <svg aria-hidden="true" class="caret astro-jvjwaqcl astro-bq6csbgl" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <ul class="astro-jvjwaqcl"> <li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/api/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">API Node.JS</span>  </a> </li> </ul>  </details> </li><li class="astro-jvjwaqcl"> <details open class="astro-jvjwaqcl"> <sl-sidebar-restore data-index="9"></sl-sidebar-restore> <summary class="astro-jvjwaqcl"> <div class="group-label astro-jvjwaqcl"> <span class="large astro-jvjwaqcl">vscode</span>  </div> <svg aria-hidden="true" class="caret astro-jvjwaqcl astro-bq6csbgl" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <ul class="astro-jvjwaqcl"> <li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/vscode/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Aperçu</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/vscode/github-copilot-chat/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">GitHub Copilot Chat</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/vscode/running-scripts/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Exécution de scripts</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/vscode/settings/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Paramètres</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/vscode/gists/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">GitHub Gists</span>  </a> </li> </ul>  </details> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/github-actions/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">GitHub Actions</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/playground/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Playground</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/azure-ai-foundry/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Azure AI Foundry</span>  </a> </li><li class="astro-jvjwaqcl"> <details open class="astro-jvjwaqcl"> <sl-sidebar-restore data-index="10"></sl-sidebar-restore> <summary class="astro-jvjwaqcl"> <div class="group-label astro-jvjwaqcl"> <span class="large astro-jvjwaqcl">runtime</span>  </div> <svg aria-hidden="true" class="caret astro-jvjwaqcl astro-bq6csbgl" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <ul class="astro-jvjwaqcl"> <li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/runtime/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Exécution</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/runtime/cast/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Cast</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/runtime/classify/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Classify</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/runtime/plugin-ast-grep/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">AST Grep</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/runtime/plugin-mdast/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">AST Markdown</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/runtime/make-it-better/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Rends-le meilleur</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/runtime/plugin-z3/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Z3</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/runtime/plugin-mermaid/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">MermaidJs</span>  </a> </li> </ul>  </details> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/configuration-files/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Fichiers de configuration</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/security-and-trust/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Sécurité et Confiance</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/transparency-note/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Note de transparence</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/reference/webapi/" aria-current="false" class="astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Serveur Web API</span>  </a> </li> </ul>  </details> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/blog" aria-current="false" class="large astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Blog</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/faq" aria-current="false" class="large astro-jvjwaqcl"> <span class="astro-jvjwaqcl">FAQ</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/slides" aria-current="false" class="large astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Slides</span>  </a> </li><li class="astro-jvjwaqcl"> <a href="/genaiscript/fr/dev" aria-current="false" class="large astro-jvjwaqcl"> <span class="astro-jvjwaqcl">Contributing</span>  </a> </li> </ul>   <script aria-hidden="true">
		(() => {
			const scroller = document.getElementById('starlight__sidebar');
			if (!window._starlightScrollRestore || !scroller) return;
			scroller.scrollTop = window._starlightScrollRestore;
			delete window._starlightScrollRestore;
		})();
	</script> </sl-sidebar-state-persist>  <div class="md:sl-hidden"> <div class="mobile-preferences sl-flex astro-m54kfj2q"> <div class="social-icons astro-m54kfj2q"> <a href="https://discord.gg/y7HpumjHeB" rel="me" class="sl-flex astro-s5lj4ku5"><span class="sr-only astro-s5lj4ku5">Discord</span><svg aria-hidden="true" class="astro-s5lj4ku5 astro-bq6csbgl" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M20.32 4.37a19.8 19.8 0 0 0-4.93-1.51 13.78 13.78 0 0 0-.64 1.28 18.27 18.27 0 0 0-5.5 0 12.64 12.64 0 0 0-.64-1.28h-.05A19.74 19.74 0 0 0 3.64 4.4 20.26 20.26 0 0 0 .11 18.09l.02.02a19.9 19.9 0 0 0 6.04 3.03l.04-.02a14.24 14.24 0 0 0 1.23-2.03.08.08 0 0 0-.05-.07 13.1 13.1 0 0 1-1.9-.92.08.08 0 0 1 .02-.1 10.2 10.2 0 0 0 .41-.31h.04a14.2 14.2 0 0 0 12.1 0l.04.01a9.63 9.63 0 0 0 .4.32.08.08 0 0 1-.03.1 12.29 12.29 0 0 1-1.9.91.08.08 0 0 0-.02.1 15.97 15.97 0 0 0 1.27 2.01h.04a19.84 19.84 0 0 0 6.03-3.05v-.03a20.12 20.12 0 0 0-3.57-13.69ZM8.02 15.33c-1.18 0-2.16-1.08-2.16-2.42 0-1.33.96-2.42 2.16-2.42 1.21 0 2.18 1.1 2.16 2.42 0 1.34-.96 2.42-2.16 2.42Zm7.97 0c-1.18 0-2.15-1.08-2.15-2.42 0-1.33.95-2.42 2.15-2.42 1.22 0 2.18 1.1 2.16 2.42 0 1.34-.94 2.42-2.16 2.42Z"/></svg></a><a href="https://github.com/microsoft/genaiscript" rel="me" class="sl-flex astro-s5lj4ku5"><span class="sr-only astro-s5lj4ku5">GitHub</span><svg aria-hidden="true" class="astro-s5lj4ku5 astro-bq6csbgl" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg></a><a href="https://www.youtube.com/@pelihalleux" rel="me" class="sl-flex astro-s5lj4ku5"><span class="sr-only astro-s5lj4ku5">YouTube</span><svg aria-hidden="true" class="astro-s5lj4ku5 astro-bq6csbgl" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M23.5 6.2A3 3 0 0 0 21.4 4c-1.9-.5-9.4-.5-9.4-.5s-7.5 0-9.4.5A3 3 0 0 0 .5 6.3C0 8 0 12 0 12s0 4 .5 5.8A3 3 0 0 0 2.6 20c1.9.6 9.4.6 9.4.6s7.5 0 9.4-.6a3 3 0 0 0 2.1-2c.5-2 .5-5.9.5-5.9s0-4-.5-5.8zm-14 9.4V8.4l6.3 3.6-6.3 3.6z"/></svg></a><a href="https://microsoft.github.io/genaiscript/blog/rss.xml" rel="me" class="sl-flex astro-s5lj4ku5"><span class="sr-only astro-s5lj4ku5">RSS</span><svg aria-hidden="true" class="astro-s5lj4ku5 astro-bq6csbgl" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M2.88 16.88a3 3 0 0 0 0 4.24 3 3 0 0 0 4.24 0 3 3 0 0 0-4.24-4.24Zm2.83 2.83a1 1 0 0 1-1.42-1.42 1 1 0 0 1 1.42 0 1 1 0 0 1 0 1.42ZM5 12a1 1 0 0 0 0 2 5 5 0 0 1 5 5 1 1 0 0 0 2 0 7 7 0 0 0-7-7Zm0-4a1 1 0 0 0 0 2 9 9 0 0 1 9 9 1 1 0 0 0 2 0 11.08 11.08 0 0 0-3.22-7.78A11.08 11.08 0 0 0 5 8Zm10.61.39A15.11 15.11 0 0 0 5 4a1 1 0 0 0 0 2 13 13 0 0 1 13 13 1 1 0 0 0 2 0 15.11 15.11 0 0 0-4.39-10.61Z"/></svg></a> </div> <div class="astro-7ggugoi7"> <a href="/genaiscript/fr/blog/" class="astro-7ggugoi7">Blog</a> </div>  <starlight-theme-select>  <label style="--sl-select-width: 6.25em" class="astro-bs72fung"> <span class="sr-only astro-bs72fung">Selectionner le thème</span> <svg aria-hidden="true" class="icon label-icon astro-bs72fung astro-bq6csbgl" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg> <select value="auto" autocomplete="off" class="astro-bs72fung"> <option value="dark" class="astro-bs72fung">Sombre</option><option value="light" class="astro-bs72fung">Clair</option><option value="auto" selected class="astro-bs72fung">Auto</option> </select> <svg aria-hidden="true" class="icon caret astro-bs72fung astro-bq6csbgl" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg> </label>  </starlight-theme-select>  <script>
	StarlightThemeProvider.updatePickers();
</script>  <starlight-lang-select><label style="--sl-select-width: 7em" class="astro-bs72fung"> <span class="sr-only astro-bs72fung">Selectionner la langue</span> <svg aria-hidden="true" class="icon label-icon astro-bs72fung astro-bq6csbgl" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path fill-rule="evenodd" d="M8.516 3a.94.94 0 0 0-.941.94v1.15H2.94a.94.94 0 1 0 0 1.882h7.362a7.422 7.422 0 0 1-1.787 3.958 7.42 7.42 0 0 1-1.422-2.425.94.94 0 1 0-1.774.627 9.303 9.303 0 0 0 1.785 3.043 7.422 7.422 0 0 1-4.164 1.278.94.94 0 1 0 0 1.881 9.303 9.303 0 0 0 5.575-1.855 9.303 9.303 0 0 0 4.11 1.74l-.763 1.525a.968.968 0 0 0-.016.034l-1.385 2.77a.94.94 0 1 0 1.683.841l1.133-2.267h5.806l1.134 2.267a.94.94 0 0 0 1.683-.841l-1.385-2.769a.95.95 0 0 0-.018-.036l-3.476-6.951a.94.94 0 0 0-1.682 0l-1.82 3.639a7.423 7.423 0 0 1-3.593-1.256 9.303 9.303 0 0 0 2.27-5.203h1.894a.94.94 0 0 0 0-1.881H9.456V3.94A.94.94 0 0 0 8.516 3Zm6.426 11.794a1.068 1.068 0 0 1-.02.039l-.703 1.407h3.924l-1.962-3.924-1.24 2.478Z" clip-rule="evenodd"/></svg> <select value="/genaiscript/fr/samples/cmt/" autocomplete="off" class="astro-bs72fung"> <option value="/genaiscript/samples/cmt/" class="astro-bs72fung">English</option><option value="/genaiscript/fr/samples/cmt/" selected class="astro-bs72fung">French</option> </select> <svg aria-hidden="true" class="icon caret astro-bs72fung astro-bq6csbgl" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg> </label> </starlight-lang-select> </div>  </div> </div> </div> </nav> <div class="main-frame astro-w64kkxlm">  <script type="module">const a=document.getElementById("starlight__sidebar"),n=a?.querySelector("sl-sidebar-state-persist"),o="sl-sidebar-state",i=()=>{let t=[];const e=n?.dataset.hash||"";try{const s=sessionStorage.getItem(o),r=JSON.parse(s||"{}");Array.isArray(r.open)&&r.hash===e&&(t=r.open)}catch{}return{hash:e,open:t,scroll:a?.scrollTop||0}},c=t=>{try{sessionStorage.setItem(o,JSON.stringify(t))}catch{}},d=()=>c(i()),l=(t,e)=>{const s=i();s.open[e]=t,c(s)};n?.addEventListener("click",t=>{if(!(t.target instanceof Element))return;const e=t.target.closest("summary")?.closest("details");if(!e)return;const s=e.querySelector("sl-sidebar-restore"),r=parseInt(s?.dataset.index||"");isNaN(r)||l(!e.open,r)});addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&d()});addEventListener("pageHide",d);</script> <div class="lg:sl-flex astro-le5h5rmr"> <aside class="right-sidebar-container print:hidden astro-le5h5rmr"> <div class="right-sidebar astro-le5h5rmr"> <div class="lg:sl-hidden astro-l5ortwdx"><mobile-starlight-toc data-min-h="2" data-max-h="3" class="astro-jt7jxveb"><nav aria-labelledby="starlight__on-this-page--mobile" class="astro-jt7jxveb"><details id="starlight__mobile-toc" class="astro-jt7jxveb"><summary id="starlight__on-this-page--mobile" class="sl-flex astro-jt7jxveb"><div class="toggle sl-flex astro-jt7jxveb">Sur cette page<svg aria-hidden="true" class="caret astro-jt7jxveb astro-bq6csbgl" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg></div><span class="display-current astro-jt7jxveb"></span></summary><div class="dropdown astro-jt7jxveb"><ul class="isMobile astro-azuljrca" style="--depth: 0;"> <li class="astro-azuljrca" style="--depth: 0;"> <a href="#_top" class="astro-azuljrca" style="--depth: 0;"> <span class="astro-azuljrca" style="--depth: 0;">Vue d’ensemble</span> </a> <ul class="isMobile astro-azuljrca" style="--depth: 1;"> <li class="astro-azuljrca" style="--depth: 1;"> <a href="#récupération-des-fichiers-à-traiter" class="astro-azuljrca" style="--depth: 1;"> <span class="astro-azuljrca" style="--depth: 1;">Récupération des fichiers à traiter</span> </a>  </li><li class="astro-azuljrca" style="--depth: 1;"> <a href="#traitement-de-chaque-fichier" class="astro-azuljrca" style="--depth: 1;"> <span class="astro-azuljrca" style="--depth: 1;">Traitement de chaque fichier</span> </a>  </li><li class="astro-azuljrca" style="--depth: 1;"> <a href="#le-prompt-pour-ajouter-des-commentaires" class="astro-azuljrca" style="--depth: 1;"> <span class="astro-azuljrca" style="--depth: 1;">Le prompt pour ajouter des commentaires</span> </a>  </li><li class="astro-azuljrca" style="--depth: 1;"> <a href="#formater-construire-analyser" class="astro-azuljrca" style="--depth: 1;"> <span class="astro-azuljrca" style="--depth: 1;">Formater, construire, analyser</span> </a>  </li><li class="astro-azuljrca" style="--depth: 1;"> <a href="#évaluer-les-résultats-avec-llm" class="astro-azuljrca" style="--depth: 1;"> <span class="astro-azuljrca" style="--depth: 1;">Évaluer les résultats avec LLM</span> </a>  </li> </ul>  </li><li class="astro-azuljrca" style="--depth: 0;"> <a href="#-comment-exécuter-le-script" class="astro-azuljrca" style="--depth: 0;"> <span class="astro-azuljrca" style="--depth: 0;">## Comment exécuter le script</span> </a>  </li><li class="astro-azuljrca" style="--depth: 0;"> <a href="#formatage-et-compilation" class="astro-azuljrca" style="--depth: 0;"> <span class="astro-azuljrca" style="--depth: 0;">Formatage et compilation</span> </a>  </li><li class="astro-azuljrca" style="--depth: 0;"> <a href="#full-source-github" class="astro-azuljrca" style="--depth: 0;"> <span class="astro-azuljrca" style="--depth: 0;">Full source (GitHub)</span> </a>  </li><li class="astro-azuljrca" style="--depth: 0;"> <a href="#sécurité-du-contenu" class="astro-azuljrca" style="--depth: 0;"> <span class="astro-azuljrca" style="--depth: 0;">Sécurité du contenu</span> </a>  </li> </ul> </div></details></nav></mobile-starlight-toc><script type="module" src="/genaiscript/_astro/MobileTableOfContents.astro_astro_type_script_index_0_lang.C181hMzK.js"></script></div><div class="right-sidebar-panel sl-hidden lg:sl-block astro-l5ortwdx"><div class="sl-container astro-l5ortwdx"><starlight-toc data-min-h="2" data-max-h="3"><nav aria-labelledby="starlight__on-this-page"><h2 id="starlight__on-this-page">Sur cette page</h2><ul class="astro-azuljrca" style="--depth: 0;"> <li class="astro-azuljrca" style="--depth: 0;"> <a href="#_top" class="astro-azuljrca" style="--depth: 0;"> <span class="astro-azuljrca" style="--depth: 0;">Vue d’ensemble</span> </a> <ul class="astro-azuljrca" style="--depth: 1;"> <li class="astro-azuljrca" style="--depth: 1;"> <a href="#récupération-des-fichiers-à-traiter" class="astro-azuljrca" style="--depth: 1;"> <span class="astro-azuljrca" style="--depth: 1;">Récupération des fichiers à traiter</span> </a>  </li><li class="astro-azuljrca" style="--depth: 1;"> <a href="#traitement-de-chaque-fichier" class="astro-azuljrca" style="--depth: 1;"> <span class="astro-azuljrca" style="--depth: 1;">Traitement de chaque fichier</span> </a>  </li><li class="astro-azuljrca" style="--depth: 1;"> <a href="#le-prompt-pour-ajouter-des-commentaires" class="astro-azuljrca" style="--depth: 1;"> <span class="astro-azuljrca" style="--depth: 1;">Le prompt pour ajouter des commentaires</span> </a>  </li><li class="astro-azuljrca" style="--depth: 1;"> <a href="#formater-construire-analyser" class="astro-azuljrca" style="--depth: 1;"> <span class="astro-azuljrca" style="--depth: 1;">Formater, construire, analyser</span> </a>  </li><li class="astro-azuljrca" style="--depth: 1;"> <a href="#évaluer-les-résultats-avec-llm" class="astro-azuljrca" style="--depth: 1;"> <span class="astro-azuljrca" style="--depth: 1;">Évaluer les résultats avec LLM</span> </a>  </li> </ul>  </li><li class="astro-azuljrca" style="--depth: 0;"> <a href="#-comment-exécuter-le-script" class="astro-azuljrca" style="--depth: 0;"> <span class="astro-azuljrca" style="--depth: 0;">## Comment exécuter le script</span> </a>  </li><li class="astro-azuljrca" style="--depth: 0;"> <a href="#formatage-et-compilation" class="astro-azuljrca" style="--depth: 0;"> <span class="astro-azuljrca" style="--depth: 0;">Formatage et compilation</span> </a>  </li><li class="astro-azuljrca" style="--depth: 0;"> <a href="#full-source-github" class="astro-azuljrca" style="--depth: 0;"> <span class="astro-azuljrca" style="--depth: 0;">Full source (GitHub)</span> </a>  </li><li class="astro-azuljrca" style="--depth: 0;"> <a href="#sécurité-du-contenu" class="astro-azuljrca" style="--depth: 0;"> <span class="astro-azuljrca" style="--depth: 0;">Sécurité du contenu</span> </a>  </li> </ul> </nav></starlight-toc><script type="module" src="/genaiscript/_astro/TableOfContents.astro_astro_type_script_index_0_lang.CKWWgpjV.js"></script></div></div> </div> </aside> <div class="main-pane astro-le5h5rmr">  <main data-pagefind-body class="astro-xqcezzus" lang="fr" dir="ltr">    <div class="content-panel astro-4v724i2b"> <div class="sl-container astro-4v724i2b"> <h1 id="_top" class="astro-cyrdcjgw">Commenter</h1>  <p class="sl-flex astro-gok2wwf2"> <svg aria-hidden="true" class="astro-gok2wwf2 astro-bq6csbgl" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-color: var(--sl-color-blue-high);--sl-icon-size: 1.5em;"><path d="M12 11a1 1 0 0 0-1 1v4a1 1 0 0 0 2 0v-4a1 1 0 0 0-1-1Zm.38-3.92a1 1 0 0 0-.76 0 1 1 0 0 0-.33.21 1.15 1.15 0 0 0-.21.33 1 1 0 0 0 .21 1.09c.097.088.209.16.33.21A1 1 0 0 0 13 8a1.05 1.05 0 0 0-.29-.71 1 1 0 0 0-.33-.21ZM12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20Zm0 18a8 8 0 1 1 0-16.001A8 8 0 0 1 12 20Z"/></svg>  <a href="https://github.com/microsoft/genaiscript/blob/dev/packages/sample/genaisrc/mdtranslator.genai.mts" class="astro-gok2wwf2">AI generated translation.</a> </p>  </div> </div>  <div class="content-panel astro-4v724i2b"> <div class="sl-container astro-4v724i2b"> <div class="sl-markdown-content"> <p>Cet exemple automatise le processus d’ajout de commentaires au code source à l’aide d’un LLM
et vérifie que les modifications n’ont pas introduit de changements dans le code.</p>
<p>Pour cela, nous pouvons utiliser une combinaison d’outils pour valider la transformation : formateurs de code,
compilateurs, linters ou un LLM comme juge.</p>
<p>L’algorithme peut se résumer comme suit :</p>
<div class="expressive-code"><link rel="stylesheet" href="/genaiscript/_astro/ec.v4551.css"><script type="module" src="/genaiscript/_astro/ec.8zarh.js"></script><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="txt"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">for each file of files</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">    </span></span><span style="--0:#d6deeb;--1:#403f53">// generate</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">    </span></span><span style="--0:#d6deeb;--1:#403f53">add comments using GenAI</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">    </span></span><span style="--0:#d6deeb;--1:#403f53">// validate validate validate!</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">    </span></span><span style="--0:#d6deeb;--1:#403f53">format generated code (optional) -- keep things consistent</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">    </span></span><span style="--0:#d6deeb;--1:#403f53">build generated -- let's make sure it's still valid code</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">    </span></span><span style="--0:#d6deeb;--1:#403f53">check that only comments were changed -- LLM as a judge</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">// and more validate</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">final human code review</span></div></div></code></pre><div class="copy"><button title="Copier dans le presse-papiers" data-copied="Copié !" data-code="for each file of files    // generate    add comments using GenAI    // validate validate validate!    format generated code (optional) -- keep things consistent    build generated -- let&#x27;s make sure it&#x27;s still valid code    check that only comments were changed -- LLM as a judge// and more validatefinal human code review"><div></div></button></div></figure></div>
<p>Commençons par analyser le script.</p>
<div class="sl-heading-wrapper level-h3"><h3 id="récupération-des-fichiers-à-traiter">Récupération des fichiers à traiter</h3><a class="sl-anchor-link" href="#récupération-des-fichiers-à-traiter"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section intitulée « Récupération des fichiers à traiter »</span></a></div>
<p>L’utilisateur peut sélectionner les fichiers à commenter ou, si aucun fichier n’est sélectionné, nous utiliserons Git pour trouver tous les fichiers modifiés.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="ts"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">let </span><span style="--0:#D6DEEB;--1:#403F53">files</span><span style="--0:#C792EA;--1:#8844AE"> = </span><span style="--0:#D6DEEB;--1:#403F53">env</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">files</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">if</span><span style="--0:#D6DEEB;--1:#403F53"> (files</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">length</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">===</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#919F9F;--1:#5D6376">// no files selected, use git to find modified files</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">files </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">await</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#096E72">...</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">git status --porcelain</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#7FDBCA;--1:#096E72">...</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#919F9F;--1:#5D6376">// details in sources</span></div></div></code></pre><div class="copy"><button title="Copier dans le presse-papiers" data-copied="Copié !" data-code="let files = env.filesif (files.length === 0)    // no files selected, use git to find modified files    files = await ...&#x22;git status --porcelain&#x22;... // details in sources"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="traitement-de-chaque-fichier">Traitement de chaque fichier</h3><a class="sl-anchor-link" href="#traitement-de-chaque-fichier"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section intitulée « Traitement de chaque fichier »</span></a></div>
<p>Nous traitons chaque fichier séparément pour ne pas surcharger le contexte de tokens et pour maintenir la concentration de l’IA. Nous pouvons utiliser des <a href="../../reference/scripts/inline-prompts/">prompts en ligne</a> pour effectuer des requêtes internes.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="ts"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">for</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">file</span><span style="--0:#C792EA;--1:#8844AE"> </span><span style="--0:#7FDBCA;--1:#096E72">of</span><span style="--0:#D6DEEB;--1:#403F53"> files) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#096E72">...</span><span style="--0:#D6DEEB;--1:#403F53"> add comments</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#096E72">...</span><span style="--0:#D6DEEB;--1:#403F53"> format generated </span><span style="--0:#82AAFF;--1:#3B61B0">code</span><span style="--0:#D6DEEB;--1:#403F53"> (optional) </span><span style="--0:#7FDBCA;--1:#096E72">--</span><span style="--0:#D6DEEB;--1:#403F53"> keep things consistent</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#096E72">...</span><span style="--0:#D6DEEB;--1:#403F53"> build generated </span><span style="--0:#7FDBCA;--1:#096E72">--</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">let'</span><span style="--0:#D6DEEB;--1:#403F53">s</span><span style="--0:#C792EA;--1:#8844AE"> make sure it</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--1:#984E4D"><span style="--0:#ECC48D">s still valid cod</span><span style="--0:#FFFFFF">e</span></span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#096E72">...</span><span style="--0:#D6DEEB;--1:#403F53"> check that only comments were changed </span><span style="--0:#7FDBCA;--1:#096E72">--</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">LLM</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">as</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#111111">judge</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#096E72">...</span><span style="--0:#D6DEEB;--1:#403F53"> save changes</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copier dans le presse-papiers" data-copied="Copié !" data-code="for (const file of files) {    ... add comments    ... format generated code (optional) -- keep things consistent    ... build generated -- let&#x27;s make sure it&#x27;s still valid code    ... check that only comments were changed -- LLM as judge    ... save changes}"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="le-prompt-pour-ajouter-des-commentaires">Le prompt pour ajouter des commentaires</h3><a class="sl-anchor-link" href="#le-prompt-pour-ajouter-des-commentaires"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section intitulée « Le prompt pour ajouter des commentaires »</span></a></div>
<p>Dans la fonction <code dir="auto">addComments</code>, nous demandons à GenAI d’ajouter des commentaires.
Nous le faisons deux fois pour augmenter la probabilité de générer des commentaires utiles,
car le LLM peut avoir été moins efficace lors du premier passage.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="ts"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">res</span><span style="--0:#C792EA;--1:#8844AE"> = await </span><span style="--0:#82AAFF;--1:#3B61B0">runPrompt</span><span style="--0:#D6DEEB;--1:#403F53">(</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#D7DBE0;--1:#403F53">ctx</span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#C792EA;--1:#8844AE"> => {</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#D6DEEB;--1:#403F53">ctx</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">$</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#ECC48D;--1:#3B61B0">You can add comments to this code...</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#C792EA;--1:#8844AE"> </span><span style="--0:#919F9F;--1:#5D6376">// prompt details in sources</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">    </span></span><span style="--0:#C792EA;--1:#8844AE">},</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">    </span></span><span style="--0:#C792EA;--1:#8844AE">{ system:</span><span style="--0:#D6DEEB;--1:#403F53"> [</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">system</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">system.files</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">]</span><span style="--0:#C792EA;--1:#8844AE"> }</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div></code></pre><div class="copy"><button title="Copier dans le presse-papiers" data-copied="Copié !" data-code="const res = await runPrompt(    (ctx) => {        ctx.$&#x60;You can add comments to this code...&#x60; // prompt details in sources    },    { system: [&#x22;system&#x22;, &#x22;system.files&#x22;] })"><div></div></button></div></figure></div>
<p>Nous fournissons un ensemble d’instructions détaillées à l’IA afin qu’elle analyse et commente le code.</p>
<div class="sl-heading-wrapper level-h3"><h3 id="formater-construire-analyser">Formater, construire, analyser</h3><a class="sl-anchor-link" href="#formater-construire-analyser"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section intitulée « Formater, construire, analyser »</span></a></div>
<p>À ce stade, nous avons un code source modifié par un LLM. Nous devons essayer d’utiliser tous les outils disponibles pour valider les modifications. Il est préférable de commencer par les formateurs et les compilateurs, car ils sont déterministes et généralement rapides.</p>
<div class="sl-heading-wrapper level-h3"><h3 id="évaluer-les-résultats-avec-llm">Évaluer les résultats avec LLM</h3><a class="sl-anchor-link" href="#évaluer-les-résultats-avec-llm"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section intitulée « Évaluer les résultats avec LLM »</span></a></div>
<p>Nous lançons un prompt supplémentaire pour juger le code modifié (<code dir="auto">git diff</code>) et nous assurer que le code n’a pas été modifié.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="ts"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">async</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">function</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">checkModifications</span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#D7DBE0;--1:#403F53">filename</span><span style="--0:#7FDBCA;--1:#096E72">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3B61B0">string</span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#7FDBCA;--1:#096E72">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#111111">Promise</span><span style="--0:#D6DEEB;--1:#403F53">&#x3C;</span><span style="--0:#C5E478;--1:#3B61B0">boolean</span><span style="--0:#D6DEEB;--1:#403F53">> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">diff</span><span style="--0:#C792EA;--1:#8844AE"> = await </span><span style="--0:#D6DEEB;--1:#403F53">host</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">exec</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#ECC48D;--1:#3B61B0">git diff </span><span style="--0:#E2817F;--1:#B23834">${</span><span style="--0:#D6DEEB;--1:#403F53">filename</span><span style="--0:#E2817F;--1:#B23834">}</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">if</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#C792EA;--1:#8844AE">!</span><span style="--0:#D6DEEB;--1:#403F53">diff</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">stdout</span><span style="--0:#D6DEEB;--1:#403F53">) </span><span style="--0:#C792EA;--1:#8844AE">return</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FF6A83;--1:#A24848">false</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">res</span><span style="--0:#C792EA;--1:#8844AE"> = await </span><span style="--0:#82AAFF;--1:#3B61B0">runPrompt</span><span style="--0:#D6DEEB;--1:#403F53">(</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#D7DBE0;--1:#403F53">ctx</span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#C792EA;--1:#8844AE"> => {</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#D6DEEB;--1:#403F53">ctx</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">def</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">DIFF</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#889FB2;--1:#4D667B">,</span><span style="--0:#C792EA;--1:#8844AE"> </span><span style="--0:#D6DEEB;--1:#403F53">diff</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">stdout</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#D6DEEB;--1:#403F53">ctx</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">$</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#ECC48D;--1:#3B61B0">You are an expert developer at all programming languages.</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3B61B0">        </span></span><span style="--0:#ECC48D;--1:#3B61B0">Your task is to analyze the changes in DIFF and make sure that only comments are modified.</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3B61B0">        </span></span><span style="--0:#ECC48D;--1:#3B61B0">Report all changes that are not comments and print "&#x3C;MODIFIED>".</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#D6DEEB;--1:#403F53">`</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">        </span></span><span style="--0:#C792EA;--1:#8844AE">}</span><span style="--0:#889FB2;--1:#4D667B">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">        </span></span><span style="--0:#C792EA;--1:#8844AE">{</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">            </span></span><span style="--0:#C792EA;--1:#8844AE">cache: </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">cmt-check</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#889FB2;--1:#4D667B">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">        </span></span><span style="--0:#C792EA;--1:#8844AE">}</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">return</span><span style="--0:#D6DEEB;--1:#403F53"> res</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">text</span><span style="--0:#C792EA;--1:#8844AE">?.</span><span style="--0:#82AAFF;--1:#3B61B0">includes</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">&#x3C;MODIFIED></span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copier dans le presse-papiers" data-copied="Copié !" data-code="async function checkModifications(filename: string): Promise<boolean> {    const diff = await host.exec(&#x60;git diff ${filename}&#x60;)    if (!diff.stdout) return false    const res = await runPrompt(        (ctx) => {            ctx.def(&#x22;DIFF&#x22;, diff.stdout)            ctx.$&#x60;You are an expert developer at all programming languages.        Your task is to analyze the changes in DIFF and make sure that only comments are modified.        Report all changes that are not comments and print &#x22;<MODIFIED>&#x22;.        &#x60;        },        {            cache: &#x22;cmt-check&#x22;,        }    )    return res.text?.includes(&#x22;<MODIFIED>&#x22;)}"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h2"><h2 id="-comment-exécuter-le-script">## Comment exécuter le script</h2><a class="sl-anchor-link" href="#-comment-exécuter-le-script"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section intitulée « ## Comment exécuter le script »</span></a></div>
<p>Pour exécuter ce script, vous devez d’abord installer l’interface en ligne de commande GenAIScript. <a href="https://microsoft.github.io/genaiscript/getting-started/installation">Suivez le guide d’installation ici</a>.</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Fenêtre de terminal</span></figcaption><pre data-language="sh"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">genaiscript</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">run</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">cmt</span></div></div></code></pre><div class="copy"><button title="Copier dans le presse-papiers" data-copied="Copié !" data-code="genaiscript run cmt"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h2"><h2 id="formatage-et-compilation">Formatage et compilation</h2><a class="sl-anchor-link" href="#formatage-et-compilation"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section intitulée « Formatage et compilation »</span></a></div>
<p>Un aspect important est de normaliser et de valider le code généré par l’IA. L’utilisateur peut fournir une commande <code dir="auto">format</code> pour exécuter un formateur
et une commande <code dir="auto">build</code> pour vérifier si le code est toujours valide.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="ts"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">script</span><span style="--0:#D6DEEB;--1:#403F53">({</span><span style="--0:#7FDBCA;--1:#096E72">...</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">parameters: {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">format: {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">            </span></span><span style="--0:#D6DEEB;--1:#403F53">type: </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">string</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">            </span></span><span style="--0:#D6DEEB;--1:#403F53">description: </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">Format source code command</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">},</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">build: {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">            </span></span><span style="--0:#D6DEEB;--1:#403F53">type: </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">string</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">            </span></span><span style="--0:#D6DEEB;--1:#403F53">description: </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">Build command</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">},</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">},</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">})</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">const { </span><span style="--0:#82AAFF;--1:#3B61B0">format</span><span style="--0:#C792EA;--1:#8844AE">, </span><span style="--0:#82AAFF;--1:#3B61B0">build</span><span style="--0:#C792EA;--1:#8844AE"> } = </span><span style="--0:#D6DEEB;--1:#403F53">env</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">vars</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">build</span></div></div></code></pre><div class="copy"><button title="Copier dans le presse-papiers" data-copied="Copié !" data-code="script({...,    parameters: {        format: {            type: &#x22;string&#x22;,            description: &#x22;Format source code command&#x22;,        },        build: {            type: &#x22;string&#x22;,            description: &#x22;Build command&#x22;,        },    },})const { format, build } = env.vars.build"><div></div></button></div></figure></div>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Fenêtre de terminal</span></figcaption><pre data-language="sh"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">genaiscript</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">run</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">cmt</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">--vars</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">build=npm run build</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">format=npm run format</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div></code></pre><div class="copy"><button title="Copier dans le presse-papiers" data-copied="Copié !" data-code="genaiscript run cmt --vars &#x22;build=npm run build&#x22; &#x22;format=npm run format&#x22;"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h2"><h2 id="full-source-github">Full source (<a href="https://github.com/microsoft/genaiscript/blob/main/samples/sample/genaisrc/samples/cmt.genai.mts">GitHub</a>)</h2><a class="sl-anchor-link" href="#full-source-github"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section intitulée « Full source (GitHub) »</span></a></div>
<div class="expressive-code"><link rel="stylesheet" href="/genaiscript/_astro/ec.v4551.css"><script type="module" src="/genaiscript/_astro/ec.8zarh.js"></script><figure class="frame has-title not-content"><figcaption class="header"><span class="title">cmt.genai.mts</span></figcaption><pre data-language="ts" class="wrap" style="--ecMaxLine:161ch"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">script</span><span style="--0:#D6DEEB;--1:#403F53">({</span></div></div><div class="ec-line" style="--ecIndent:2ch"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">title: </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">Source Code Comment Generator</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line" style="--ecIndent:2ch"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">description: </span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#ECC48D;--1:#3B61B0">Add comments to source code to make it more understandable for AI systems or human developers.</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line" style="--ecIndent:2ch"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">parameters: {</span></div></div><div class="ec-line" style="--ecIndent:4ch"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">format: {</span></div></div><div class="ec-line" style="--ecIndent:6ch"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">type: </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">string</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line" style="--ecIndent:6ch"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">description: </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">Format source code command</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line" style="--ecIndent:4ch"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">},</span></div></div><div class="ec-line" style="--ecIndent:4ch"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">build: {</span></div></div><div class="ec-line" style="--ecIndent:6ch"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">type: </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">string</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line" style="--ecIndent:6ch"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">description: </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">Build command</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line" style="--ecIndent:4ch"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">},</span></div></div><div class="ec-line" style="--ecIndent:2ch"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">},</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">});</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">const { </span><span style="--0:#82AAFF;--1:#3B61B0">format</span><span style="--0:#C792EA;--1:#8844AE">, </span><span style="--0:#82AAFF;--1:#3B61B0">build</span><span style="--0:#C792EA;--1:#8844AE"> } = </span><span style="--0:#D6DEEB;--1:#403F53">env</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">vars</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5D6376">// Get files from environment or modified files from Git if none provided</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">let </span><span style="--0:#D6DEEB;--1:#403F53">files</span><span style="--0:#C792EA;--1:#8844AE"> = </span><span style="--0:#D6DEEB;--1:#403F53">env</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">files</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">if</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#C792EA;--1:#8844AE">!</span><span style="--0:#D6DEEB;--1:#403F53">files</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">length</span><span style="--0:#D6DEEB;--1:#403F53">) files </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">await</span><span style="--0:#D6DEEB;--1:#403F53"> git</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">listFiles</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">staged</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, { askStageOnEmpty: </span><span style="--0:#FF6A83;--1:#A24848">true</span><span style="--0:#D6DEEB;--1:#403F53"> });</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">if</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#C792EA;--1:#8844AE">!</span><span style="--0:#D6DEEB;--1:#403F53">files</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">length</span><span style="--0:#D6DEEB;--1:#403F53">) files </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">await</span><span style="--0:#D6DEEB;--1:#403F53"> git</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">listFiles</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">modified-base</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5D6376">// custom filter to only process code files</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">files </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> files</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">filter</span><span style="--0:#D6DEEB;--1:#403F53">(</span></div></div><div class="ec-line" style="--ecIndent:2ch"><div class="code"><span class="indent">  </span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--1:#403F53"><span style="--0:#D6DEEB">{ </span><span style="--0:#D7DBE0">filename</span><span style="--0:#D6DEEB"> }</span></span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=></span></div></div><div class="ec-line" style="--ecIndent:4ch"><div class="code"><span class="indent">    </span><span style="--0:#D9F5DD;--1:#111111">/</span><span style="--0:#F78C6C;--1:#AA0982">\.</span><span style="--0:#5CA7E4;--1:#3A688F">(py</span><span style="--0:#7FDBCA;--1:#096E72">|</span><span style="--0:#5CA7E4;--1:#3A688F">m</span><span style="--0:#7FDBCA;--1:#096E72">?</span><span style="--0:#5CA7E4;--1:#3A688F">ts</span><span style="--0:#7FDBCA;--1:#096E72">|</span><span style="--0:#5CA7E4;--1:#3A688F">m</span><span style="--0:#7FDBCA;--1:#096E72">?</span><span style="--0:#5CA7E4;--1:#3A688F">js</span><span style="--0:#7FDBCA;--1:#096E72">|</span><span style="--0:#5CA7E4;--1:#3A688F">cs</span><span style="--0:#7FDBCA;--1:#096E72">|</span><span style="--0:#5CA7E4;--1:#3A688F">java</span><span style="--0:#7FDBCA;--1:#096E72">|</span><span style="--0:#5CA7E4;--1:#3A688F">c</span><span style="--0:#7FDBCA;--1:#096E72">|</span><span style="--0:#5CA7E4;--1:#3A688F">cpp</span><span style="--0:#7FDBCA;--1:#096E72">|</span><span style="--0:#5CA7E4;--1:#3A688F">h</span><span style="--0:#7FDBCA;--1:#096E72">|</span><span style="--0:#5CA7E4;--1:#3A688F">hpp)</span><span style="--0:#C792EA;--1:#8844AE">$</span><span style="--0:#D9F5DD;--1:#111111">/</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">test</span><span style="--0:#D6DEEB;--1:#403F53">(filename) </span><span style="--0:#C792EA;--1:#8844AE">&#x26;&#x26;</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#919F9F;--1:#5D6376">// known languages only</span></div></div><div class="ec-line" style="--ecIndent:4ch"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">!</span><span style="--0:#D9F5DD;--1:#111111">/</span><span style="--0:#F78C6C;--1:#AA0982">\.</span><span style="--0:#5CA7E4;--1:#3A688F">test</span><span style="--0:#D9F5DD;--1:#111111">/</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">test</span><span style="--0:#D6DEEB;--1:#403F53">(filename), </span><span style="--0:#919F9F;--1:#5D6376">// ignore test files</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5D6376">// Shuffle files</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">files </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> files</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">sort</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=></span><span style="--0:#D6DEEB;--1:#403F53"> Math</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">random</span><span style="--0:#D6DEEB;--1:#403F53">() </span><span style="--0:#C792EA;--1:#8844AE">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">0.5</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">console</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">log</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#82AAFF;--1:#3B61B0">YAML</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">stringify</span><span style="--0:#D6DEEB;--1:#403F53">(files</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">map</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#D7DBE0;--1:#403F53">f</span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=></span><span style="--0:#D6DEEB;--1:#403F53"> f</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">filename</span><span style="--0:#D6DEEB;--1:#403F53">)));</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5D6376">// Process each file separately to avoid context explosion</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">jobs</span><span style="--0:#C792EA;--1:#8844AE"> = </span><span style="--0:#D6DEEB;--1:#403F53">host</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">promiseQueue</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#F78C6C;--1:#AA0982">5</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">await</span><span style="--0:#D6DEEB;--1:#403F53"> jobs</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">mapAll</span><span style="--0:#D6DEEB;--1:#403F53">(files, processFile);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">async</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">function</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">processFile</span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#D7DBE0;--1:#403F53">file</span><span style="--0:#7FDBCA;--1:#096E72">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--1:#111111"><span style="--0:#FFCB8B">WorkspaceFile</span><span style="--0:#D9F5DD">)</span></span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line" style="--ecIndent:2ch"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">console</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">log</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#ECC48D;--1:#3B61B0">processing </span><span style="--0:#E2817F;--1:#B23834">${</span><span style="--0:#D6DEEB;--1:#403F53">file</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">filename</span><span style="--0:#E2817F;--1:#B23834">}</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line" style="--ecIndent:2ch"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">if</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#C792EA;--1:#8844AE">!</span><span style="--0:#D6DEEB;--1:#403F53">file</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">content</span><span style="--0:#D6DEEB;--1:#403F53">) console</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">log</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#ECC48D;--1:#3B61B0">empty file, continue</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line" style="--ecIndent:2ch"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">try</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line" style="--ecIndent:4ch"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">newContent</span><span style="--0:#C792EA;--1:#8844AE"> = await </span><span style="--0:#82AAFF;--1:#3B61B0">addComments</span><span style="--0:#D6DEEB;--1:#403F53">(file);</span></div></div><div class="ec-line" style="--ecIndent:4ch"><div class="code"><span class="indent">    </span><span style="--0:#919F9F;--1:#5D6376">// Save modified content if different</span></div></div><div class="ec-line" style="--ecIndent:4ch"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">if</span><span style="--0:#D6DEEB;--1:#403F53"> (newContent </span><span style="--0:#C792EA;--1:#8844AE">&#x26;&#x26;</span><span style="--0:#D6DEEB;--1:#403F53"> file</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">content</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">!==</span><span style="--0:#D6DEEB;--1:#403F53"> newContent) {</span></div></div><div class="ec-line" style="--ecIndent:6ch"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">console</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">log</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#ECC48D;--1:#3B61B0">updating </span><span style="--0:#E2817F;--1:#B23834">${</span><span style="--0:#D6DEEB;--1:#403F53">file</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">filename</span><span style="--0:#E2817F;--1:#B23834">}</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line" style="--ecIndent:6ch"><div class="code"><span class="indent">      </span><span style="--0:#C792EA;--1:#8844AE">await</span><span style="--0:#D6DEEB;--1:#403F53"> workspace</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">writeText</span><span style="--0:#D6DEEB;--1:#403F53">(file</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">filename</span><span style="--0:#889FB2;--1:#4D667B">,</span><span style="--0:#D6DEEB;--1:#403F53"> newContent);</span></div></div><div class="ec-line" style="--ecIndent:6ch"><div class="code"><span class="indent">      </span><span style="--0:#C792EA;--1:#8844AE">let </span><span style="--0:#D6DEEB;--1:#403F53">revert</span><span style="--0:#C792EA;--1:#8844AE"> = </span><span style="--0:#FF6A83;--1:#A24848">false</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line" style="--ecIndent:6ch"><div class="code"><span class="indent">      </span><span style="--0:#919F9F;--1:#5D6376">// try formatting</span></div></div><div class="ec-line" style="--ecIndent:6ch"><div class="code"><span class="indent">      </span><span style="--0:#C792EA;--1:#8844AE">if</span><span style="--0:#D6DEEB;--1:#403F53"> (format) {</span></div></div><div class="ec-line" style="--ecIndent:8ch"><div class="code"><span class="indent">        </span><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">formatRes</span><span style="--0:#C792EA;--1:#8844AE"> = await </span><span style="--0:#D6DEEB;--1:#403F53">host</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">exec</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#E2817F;--1:#B23834">${</span><span style="--0:#D6DEEB;--1:#403F53">format</span><span style="--0:#E2817F;--1:#B23834">}</span><span style="--0:#ECC48D;--1:#3B61B0"> </span><span style="--0:#E2817F;--1:#B23834">${</span><span style="--0:#D6DEEB;--1:#403F53">file</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">filename</span><span style="--0:#E2817F;--1:#B23834">}</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line" style="--ecIndent:8ch"><div class="code"><span class="indent">        </span><span style="--0:#C792EA;--1:#8844AE">if</span><span style="--0:#D6DEEB;--1:#403F53"> (formatRes</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">exitCode</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">!==</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">) {</span></div></div><div class="ec-line" style="--ecIndent:10ch"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">          </span></span><span style="--0:#D6DEEB;--1:#403F53">revert </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FF6A83;--1:#A24848">true</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line" style="--ecIndent:8ch"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line" style="--ecIndent:6ch"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line" style="--ecIndent:6ch"><div class="code"><span class="indent">      </span><span style="--0:#919F9F;--1:#5D6376">// try building</span></div></div><div class="ec-line" style="--ecIndent:6ch"><div class="code"><span class="indent">      </span><span style="--0:#C792EA;--1:#8844AE">if</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#C792EA;--1:#8844AE">!</span><span style="--0:#D6DEEB;--1:#403F53">revert </span><span style="--0:#C792EA;--1:#8844AE">&#x26;&#x26;</span><span style="--0:#D6DEEB;--1:#403F53"> build) {</span></div></div><div class="ec-line" style="--ecIndent:8ch"><div class="code"><span class="indent">        </span><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">buildRes</span><span style="--0:#C792EA;--1:#8844AE"> = await </span><span style="--0:#D6DEEB;--1:#403F53">host</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">exec</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#E2817F;--1:#B23834">${</span><span style="--0:#D6DEEB;--1:#403F53">build</span><span style="--0:#E2817F;--1:#B23834">}</span><span style="--0:#ECC48D;--1:#3B61B0"> </span><span style="--0:#E2817F;--1:#B23834">${</span><span style="--0:#D6DEEB;--1:#403F53">file</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">filename</span><span style="--0:#E2817F;--1:#B23834">}</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line" style="--ecIndent:8ch"><div class="code"><span class="indent">        </span><span style="--0:#C792EA;--1:#8844AE">if</span><span style="--0:#D6DEEB;--1:#403F53"> (buildRes</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">exitCode</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">!==</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">) {</span></div></div><div class="ec-line" style="--ecIndent:10ch"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">          </span></span><span style="--0:#D6DEEB;--1:#403F53">revert </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FF6A83;--1:#A24848">true</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line" style="--ecIndent:8ch"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line" style="--ecIndent:6ch"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line" style="--ecIndent:6ch"><div class="code"><span class="indent">      </span><span style="--0:#919F9F;--1:#5D6376">// last LLM as judge check</span></div></div><div class="ec-line" style="--ecIndent:6ch"><div class="code"><span class="indent">      </span><span style="--0:#C792EA;--1:#8844AE">if</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#C792EA;--1:#8844AE">!</span><span style="--0:#D6DEEB;--1:#403F53">revert) revert </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">await</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">checkModifications</span><span style="--0:#D6DEEB;--1:#403F53">(file</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">filename</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line" style="--ecIndent:6ch"><div class="code"><span class="indent">      </span><span style="--0:#919F9F;--1:#5D6376">// revert</span></div></div><div class="ec-line" style="--ecIndent:6ch"><div class="code"><span class="indent">      </span><span style="--0:#C792EA;--1:#8844AE">if</span><span style="--0:#D6DEEB;--1:#403F53"> (revert) {</span></div></div><div class="ec-line" style="--ecIndent:8ch"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">console</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">error</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#ECC48D;--1:#3B61B0">reverting </span><span style="--0:#E2817F;--1:#B23834">${</span><span style="--0:#D6DEEB;--1:#403F53">file</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">filename</span><span style="--0:#E2817F;--1:#B23834">}</span><span style="--0:#ECC48D;--1:#3B61B0">...</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line" style="--ecIndent:8ch"><div class="code"><span class="indent">        </span><span style="--0:#C792EA;--1:#8844AE">await</span><span style="--0:#D6DEEB;--1:#403F53"> workspace</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">writeText</span><span style="--0:#D6DEEB;--1:#403F53">(file</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">filename</span><span style="--0:#889FB2;--1:#4D667B">,</span><span style="--0:#D6DEEB;--1:#403F53"> file</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">content</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line" style="--ecIndent:6ch"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line" style="--ecIndent:4ch"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line" style="--ecIndent:2ch"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">} </span><span style="--0:#C792EA;--1:#8844AE">catch</span><span style="--0:#D6DEEB;--1:#403F53"> (e) {</span></div></div><div class="ec-line" style="--ecIndent:4ch"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">console</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">error</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#ECC48D;--1:#3B61B0">error: </span><span style="--0:#E2817F;--1:#B23834">${</span><span style="--0:#D6DEEB;--1:#403F53">e</span><span style="--0:#E2817F;--1:#B23834">}</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line" style="--ecIndent:2ch"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5D6376">// Function to add comments to code</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">async</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">function</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">addComments</span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#D7DBE0;--1:#403F53">file</span><span style="--0:#7FDBCA;--1:#096E72">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--1:#111111"><span style="--0:#FFCB8B">WorkspaceFile</span><span style="--0:#D9F5DD">)</span></span><span style="--0:#7FDBCA;--1:#096E72">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#111111">Promise</span><span style="--0:#D6DEEB;--1:#403F53">&#x3C;</span><span style="--0:#C5E478;--1:#3B61B0">string</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#096E72">|</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3B61B0">undefined</span><span style="--0:#D6DEEB;--1:#403F53">> {</span></div></div><div class="ec-line" style="--ecIndent:2ch"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">let { </span><span style="--0:#D6DEEB;--1:#403F53">filename</span><span style="--0:#889FB2;--1:#4D667B">,</span><span style="--0:#C792EA;--1:#8844AE"> </span><span style="--0:#D6DEEB;--1:#403F53">content</span><span style="--0:#C792EA;--1:#8844AE"> } = </span><span style="--0:#D6DEEB;--1:#403F53">file;</span></div></div><div class="ec-line" style="--ecIndent:2ch"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">if</span><span style="--0:#D6DEEB;--1:#403F53"> ((</span><span style="--0:#C792EA;--1:#8844AE">await</span><span style="--0:#D6DEEB;--1:#403F53"> tokenizers</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">count</span><span style="--0:#D6DEEB;--1:#403F53">(file</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">content</span><span style="--0:#D6DEEB;--1:#403F53">)) </span><span style="--0:#C792EA;--1:#8844AE">></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">20000</span><span style="--0:#D6DEEB;--1:#403F53">) </span><span style="--0:#C792EA;--1:#8844AE">return</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">undefined</span><span style="--0:#D6DEEB;--1:#403F53">; </span><span style="--0:#919F9F;--1:#5D6376">// too big</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line" style="--ecIndent:2ch"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">res</span><span style="--0:#C792EA;--1:#8844AE"> = await </span><span style="--0:#82AAFF;--1:#3B61B0">runPrompt</span><span style="--0:#D6DEEB;--1:#403F53">(</span></div></div><div class="ec-line" style="--ecIndent:4ch"><div class="code"><span class="indent">    </span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#D7DBE0;--1:#403F53">ctx</span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#C792EA;--1:#8844AE"> => {</span></div></div><div class="ec-line" style="--ecIndent:6ch"><div class="code"><span class="indent">      </span><span style="--0:#919F9F;--1:#5D6376">// Define code snippet for AI context with line numbers</span></div></div><div class="ec-line" style="--ecIndent:6ch"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">      </span></span><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">code</span><span style="--0:#C792EA;--1:#8844AE"> = </span><span style="--0:#D6DEEB;--1:#403F53">ctx</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">def</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">CODE</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#889FB2;--1:#4D667B">,</span><span style="--0:#C792EA;--1:#8844AE"> { </span><span style="--0:#D6DEEB;--1:#403F53">filename</span><span style="--0:#889FB2;--1:#4D667B">,</span><span style="--0:#C792EA;--1:#8844AE"> </span><span style="--0:#D6DEEB;--1:#403F53">content</span><span style="--0:#C792EA;--1:#8844AE"> }</span><span style="--0:#889FB2;--1:#4D667B">,</span><span style="--0:#C792EA;--1:#8844AE"> { lineNumbers: </span><span style="--0:#FF6A83;--1:#A24848">false</span><span style="--0:#C792EA;--1:#8844AE"> }</span><span style="--0:#D6DEEB;--1:#403F53">)</span><span style="--0:#C792EA;--1:#8844AE">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line" style="--ecIndent:6ch"><div class="code"><span class="indent">      </span><span style="--0:#919F9F;--1:#5D6376">// AI prompt to add comments for better understanding</span></div></div><div class="ec-line" style="--ecIndent:6ch"><div class="code"><span class="indent">      </span><span style="--0:#D6DEEB;--1:#403F53">ctx</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">def</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">FILE</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#889FB2;--1:#4D667B">,</span><span style="--0:#C792EA;--1:#8844AE"> </span><span style="--0:#D6DEEB;--1:#403F53">code</span><span style="--0:#889FB2;--1:#4D667B">,</span><span style="--0:#C792EA;--1:#8844AE"> { detectPromptInjection: </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">available</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#C792EA;--1:#8844AE"> }</span><span style="--0:#D6DEEB;--1:#403F53">)</span><span style="--0:#C792EA;--1:#8844AE">;</span></div></div><div class="ec-line" style="--ecIndent:6ch"><div class="code"><span class="indent">      </span><span style="--0:#D6DEEB;--1:#403F53">ctx</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">$</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#ECC48D;--1:#3B61B0">You are an expert developer at all programming languages.</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3B61B0">You are tasked with adding comments to code in FILE to make it more understandable for AI systems or human developers.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3B61B0">You should analyze it, and add/update appropriate comments as needed.</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3B61B0">To add or update comments to this code, follow these steps:</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3B61B0">1. Analyze the code to understand its structure and functionality.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3B61B0">- If you are not familiar with the programming language, emit an empty file.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3B61B0">- If there is no code, emit an empty file.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3B61B0">2. Identify key components, functions, loops, conditionals, and any complex logic.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3B61B0">3. Add comments that explain:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3B61B0">- The purpose of functions or code blocks using the best comment format for that programming language.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3B61B0">- How complex algorithms or logic work</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3B61B0">- Any assumptions or limitations in the code</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3B61B0">- The meaning of important variables or data structures</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3B61B0">- Any potential edge cases or error handling</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3B61B0">- All function arguments and return value</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3B61B0">- A Top level file comment that describes the code in the file</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3B61B0">When adding or updating comments, follow these guidelines:</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3B61B0">- Use clear and concise language</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3B61B0">- Avoid stating the obvious (e.g., don't just restate what the code does)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3B61B0">- Focus on the "why" and "how" rather than just the "what"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3B61B0">- Use single-line comments for brief explanations</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3B61B0">- Use multi-line comments for longer explanations or function/class descriptions</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3B61B0">- Always place comments above the code they refer to.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3B61B0">- If comments already exist, review and update them as needed.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3B61B0">- Minimize changes to existing comments.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3B61B0">- For TypeScript functions, classes and fields, use JSDoc comments. do NOT add type annotations in comments.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3B61B0">- For Python functions and classes, use docstrings.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3B61B0">- do NOT modify comments with TODOs.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3B61B0">- do NOT modify comments with URLs or links as they are reference to external resources.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3B61B0">- do NOT add comments to imports</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3B61B0">Your output should be the original code with your added comments. Make sure to preserve ALL the original code's formatting and structure. DO NOT BE LAZY.</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3B61B0">Remember, the goal is to make the code more understandable without changing its functionality. DO NOT MODIFY THE CODE ITSELF.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#3B61B0">Your comments should provide insight into the code's purpose, logic, and any important considerations for future developers or AI systems working with this code.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#C792EA;--1:#8844AE">;</span></div></div><div class="ec-line" style="--ecIndent:4ch"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">    </span></span><span style="--0:#C792EA;--1:#8844AE">}</span><span style="--0:#889FB2;--1:#4D667B">,</span></div></div><div class="ec-line" style="--ecIndent:4ch"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">    </span></span><span style="--0:#C792EA;--1:#8844AE">{</span></div></div><div class="ec-line" style="--ecIndent:6ch"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">      </span></span><span style="--0:#C792EA;--1:#8844AE">system:</span><span style="--0:#D6DEEB;--1:#403F53"> [</span></div></div><div class="ec-line" style="--ecIndent:8ch"><div class="code"><span class="indent">        </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">system.assistant</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#889FB2;--1:#4D667B">,</span></div></div><div class="ec-line" style="--ecIndent:8ch"><div class="code"><span class="indent">        </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">system.safety_jailbreak</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#889FB2;--1:#4D667B">,</span></div></div><div class="ec-line" style="--ecIndent:8ch"><div class="code"><span class="indent">        </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">system.safety_harmful_content</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#889FB2;--1:#4D667B">,</span></div></div><div class="ec-line" style="--ecIndent:8ch"><div class="code"><span class="indent">        </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">system.safety_validate_harmful_content</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#889FB2;--1:#4D667B">,</span></div></div><div class="ec-line" style="--ecIndent:6ch"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">]</span><span style="--0:#889FB2;--1:#4D667B">,</span></div></div><div class="ec-line" style="--ecIndent:6ch"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">      </span></span><span style="--0:#C792EA;--1:#8844AE">label: </span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#ECC48D;--1:#3B61B0">comment </span><span style="--0:#E2817F;--1:#B23834">${</span><span style="--0:#D6DEEB;--1:#403F53">filename</span><span style="--0:#E2817F;--1:#B23834">}</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#889FB2;--1:#4D667B">,</span></div></div><div class="ec-line" style="--ecIndent:4ch"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">    </span></span><span style="--0:#C792EA;--1:#8844AE">}</span><span style="--0:#889FB2;--1:#4D667B">,</span></div></div><div class="ec-line" style="--ecIndent:2ch"><div class="code"><span class="indent">  </span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line" style="--ecIndent:2ch"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">const { </span><span style="--0:#82AAFF;--1:#3B61B0">text</span><span style="--0:#889FB2;--1:#4D667B">,</span><span style="--0:#C792EA;--1:#8844AE"> </span><span style="--0:#82AAFF;--1:#3B61B0">fences</span><span style="--0:#C792EA;--1:#8844AE"> } = </span><span style="--0:#D6DEEB;--1:#403F53">res;</span></div></div><div class="ec-line" style="--ecIndent:2ch"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">newContent</span><span style="--0:#C792EA;--1:#8844AE"> = </span><span style="--0:#D6DEEB;--1:#403F53">fences</span><span style="--0:#C792EA;--1:#8844AE">?.</span><span style="--0:#D6DEEB;--1:#403F53">[</span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">]</span><span style="--0:#C792EA;--1:#8844AE">?.</span><span style="--0:#7FDBCA;--1:#096E72">content</span><span style="--0:#C792EA;--1:#8844AE"> ?? </span><span style="--0:#D6DEEB;--1:#403F53">text;</span></div></div><div class="ec-line" style="--ecIndent:2ch"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">return</span><span style="--0:#D6DEEB;--1:#403F53"> newContent;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">async</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">function</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">checkModifications</span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#D7DBE0;--1:#403F53">filename</span><span style="--0:#7FDBCA;--1:#096E72">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3B61B0">string</span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#7FDBCA;--1:#096E72">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#111111">Promise</span><span style="--0:#D6DEEB;--1:#403F53">&#x3C;</span><span style="--0:#C5E478;--1:#3B61B0">boolean</span><span style="--0:#D6DEEB;--1:#403F53">> {</span></div></div><div class="ec-line" style="--ecIndent:2ch"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">diff</span><span style="--0:#C792EA;--1:#8844AE"> = await </span><span style="--0:#D6DEEB;--1:#403F53">git</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">diff</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C792EA;--1:#8844AE">{ paths: </span><span style="--0:#D6DEEB;--1:#403F53">filename</span><span style="--0:#C792EA;--1:#8844AE"> }</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line" style="--ecIndent:2ch"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">if</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#C792EA;--1:#8844AE">!</span><span style="--0:#D6DEEB;--1:#403F53">diff) </span><span style="--0:#C792EA;--1:#8844AE">return</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FF6A83;--1:#A24848">false</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line" style="--ecIndent:2ch"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">res</span><span style="--0:#C792EA;--1:#8844AE"> = await </span><span style="--0:#82AAFF;--1:#3B61B0">runPrompt</span><span style="--0:#D6DEEB;--1:#403F53">(</span></div></div><div class="ec-line" style="--ecIndent:4ch"><div class="code"><span class="indent">    </span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#D7DBE0;--1:#403F53">ctx</span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#C792EA;--1:#8844AE"> => {</span></div></div><div class="ec-line" style="--ecIndent:6ch"><div class="code"><span class="indent">      </span><span style="--0:#D6DEEB;--1:#403F53">ctx</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">def</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">DIFF</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#889FB2;--1:#4D667B">,</span><span style="--0:#C792EA;--1:#8844AE"> </span><span style="--0:#D6DEEB;--1:#403F53">diff</span><span style="--0:#889FB2;--1:#4D667B">,</span><span style="--0:#C792EA;--1:#8844AE"> { language: </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">diff</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#C792EA;--1:#8844AE"> }</span><span style="--0:#D6DEEB;--1:#403F53">)</span><span style="--0:#C792EA;--1:#8844AE">;</span></div></div><div class="ec-line" style="--ecIndent:6ch"><div class="code"><span class="indent">      </span><span style="--0:#D6DEEB;--1:#403F53">ctx</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">$</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#ECC48D;--1:#3B61B0">You are an expert developer at all programming languages.</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line" style="--ecIndent:8ch"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3B61B0">        </span></span><span style="--0:#ECC48D;--1:#3B61B0">Your task is to analyze the changes in DIFF and make sure that only comments are modified.</span></div></div><div class="ec-line" style="--ecIndent:8ch"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3B61B0">        </span></span><span style="--0:#ECC48D;--1:#3B61B0">Report all changes that are not comments or spacing and print &#x3C;MOD>;</span></div></div><div class="ec-line" style="--ecIndent:8ch"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#3B61B0">        </span></span><span style="--0:#ECC48D;--1:#3B61B0">otherwise, print &#x3C;NO_MOD>.</span></div></div><div class="ec-line" style="--ecIndent:8ch"><div class="code"><span class="indent">        </span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#C792EA;--1:#8844AE">;</span></div></div><div class="ec-line" style="--ecIndent:4ch"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">    </span></span><span style="--0:#C792EA;--1:#8844AE">}</span><span style="--0:#889FB2;--1:#4D667B">,</span></div></div><div class="ec-line" style="--ecIndent:4ch"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">    </span></span><span style="--0:#C792EA;--1:#8844AE">{</span></div></div><div class="ec-line" style="--ecIndent:6ch"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">      </span></span><span style="--0:#C792EA;--1:#8844AE">system:</span><span style="--0:#D6DEEB;--1:#403F53"> [</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">system.assistant</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#889FB2;--1:#4D667B">,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">system.safety_jailbreak</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">]</span><span style="--0:#889FB2;--1:#4D667B">,</span></div></div><div class="ec-line" style="--ecIndent:6ch"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">      </span></span><span style="--0:#C792EA;--1:#8844AE">cache: </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">cmt-check</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#889FB2;--1:#4D667B">,</span></div></div><div class="ec-line" style="--ecIndent:6ch"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">      </span></span><span style="--0:#C792EA;--1:#8844AE">label: </span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#ECC48D;--1:#3B61B0">check comments in </span><span style="--0:#E2817F;--1:#B23834">${</span><span style="--0:#D6DEEB;--1:#403F53">filename</span><span style="--0:#E2817F;--1:#B23834">}</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#889FB2;--1:#4D667B">,</span></div></div><div class="ec-line" style="--ecIndent:4ch"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">    </span></span><span style="--0:#C792EA;--1:#8844AE">}</span><span style="--0:#889FB2;--1:#4D667B">,</span></div></div><div class="ec-line" style="--ecIndent:2ch"><div class="code"><span class="indent">  </span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line" style="--ecIndent:2ch"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">modified</span><span style="--0:#C792EA;--1:#8844AE"> = </span><span style="--0:#D6DEEB;--1:#403F53">res</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">text</span><span style="--0:#C792EA;--1:#8844AE">?.</span><span style="--0:#82AAFF;--1:#3B61B0">includes</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">&#x3C;MOD></span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">)</span><span style="--0:#C792EA;--1:#8844AE"> || !</span><span style="--0:#D6DEEB;--1:#403F53">res</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">text</span><span style="--0:#C792EA;--1:#8844AE">?.</span><span style="--0:#82AAFF;--1:#3B61B0">includes</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">&#x3C;NO_MOD></span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line" style="--ecIndent:2ch"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">return</span><span style="--0:#D6DEEB;--1:#403F53"> modified;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="script({  title: &#x22;Source Code Comment Generator&#x22;,  description: &#x60;Add comments to source code to make it more understandable for AI systems or human developers.&#x60;,  parameters: {    format: {      type: &#x22;string&#x22;,      description: &#x22;Format source code command&#x22;,    },    build: {      type: &#x22;string&#x22;,      description: &#x22;Build command&#x22;,    },  },});const { format, build } = env.vars;// Get files from environment or modified files from Git if none providedlet files = env.files;if (!files.length) files = await git.listFiles(&#x22;staged&#x22;, { askStageOnEmpty: true });if (!files.length) files = await git.listFiles(&#x22;modified-base&#x22;);// custom filter to only process code filesfiles = files.filter(  ({ filename }) =>    /\.(py|m?ts|m?js|cs|java|c|cpp|h|hpp)$/.test(filename) &#x26;&#x26; // known languages only    !/\.test/.test(filename), // ignore test files);// Shuffle filesfiles = files.sort(() => Math.random() - 0.5);console.log(YAML.stringify(files.map((f) => f.filename)));// Process each file separately to avoid context explosionconst jobs = host.promiseQueue(5);await jobs.mapAll(files, processFile);async function processFile(file: WorkspaceFile) {  console.log(&#x60;processing ${file.filename}&#x60;);  if (!file.content) console.log(&#x60;empty file, continue&#x60;);  try {    const newContent = await addComments(file);    // Save modified content if different    if (newContent &#x26;&#x26; file.content !== newContent) {      console.log(&#x60;updating ${file.filename}&#x60;);      await workspace.writeText(file.filename, newContent);      let revert = false;      // try formatting      if (format) {        const formatRes = await host.exec(&#x60;${format} ${file.filename}&#x60;);        if (formatRes.exitCode !== 0) {          revert = true;        }      }      // try building      if (!revert &#x26;&#x26; build) {        const buildRes = await host.exec(&#x60;${build} ${file.filename}&#x60;);        if (buildRes.exitCode !== 0) {          revert = true;        }      }      // last LLM as judge check      if (!revert) revert = await checkModifications(file.filename);      // revert      if (revert) {        console.error(&#x60;reverting ${file.filename}...&#x60;);        await workspace.writeText(file.filename, file.content);      }    }  } catch (e) {    console.error(&#x60;error: ${e}&#x60;);  }}// Function to add comments to codeasync function addComments(file: WorkspaceFile): Promise<string | undefined> {  let { filename, content } = file;  if ((await tokenizers.count(file.content)) > 20000) return undefined; // too big  const res = await runPrompt(    (ctx) => {      // Define code snippet for AI context with line numbers      const code = ctx.def(&#x22;CODE&#x22;, { filename, content }, { lineNumbers: false });      // AI prompt to add comments for better understanding      ctx.def(&#x22;FILE&#x22;, code, { detectPromptInjection: &#x22;available&#x22; });      ctx.$&#x60;You are an expert developer at all programming languages.You are tasked with adding comments to code in FILE to make it more understandable for AI systems or human developers.You should analyze it, and add/update appropriate comments as needed.To add or update comments to this code, follow these steps:1. Analyze the code to understand its structure and functionality.- If you are not familiar with the programming language, emit an empty file.- If there is no code, emit an empty file.2. Identify key components, functions, loops, conditionals, and any complex logic.3. Add comments that explain:- The purpose of functions or code blocks using the best comment format for that programming language.- How complex algorithms or logic work- Any assumptions or limitations in the code- The meaning of important variables or data structures- Any potential edge cases or error handling- All function arguments and return value- A Top level file comment that describes the code in the fileWhen adding or updating comments, follow these guidelines:- Use clear and concise language- Avoid stating the obvious (e.g., don&#x27;t just restate what the code does)- Focus on the &#x22;why&#x22; and &#x22;how&#x22; rather than just the &#x22;what&#x22;- Use single-line comments for brief explanations- Use multi-line comments for longer explanations or function/class descriptions- Always place comments above the code they refer to.- If comments already exist, review and update them as needed.- Minimize changes to existing comments.- For TypeScript functions, classes and fields, use JSDoc comments. do NOT add type annotations in comments.- For Python functions and classes, use docstrings.- do NOT modify comments with TODOs.- do NOT modify comments with URLs or links as they are reference to external resources.- do NOT add comments to importsYour output should be the original code with your added comments. Make sure to preserve ALL the original code&#x27;s formatting and structure. DO NOT BE LAZY.Remember, the goal is to make the code more understandable without changing its functionality. DO NOT MODIFY THE CODE ITSELF.Your comments should provide insight into the code&#x27;s purpose, logic, and any important considerations for future developers or AI systems working with this code.&#x60;;    },    {      system: [        &#x22;system.assistant&#x22;,        &#x22;system.safety_jailbreak&#x22;,        &#x22;system.safety_harmful_content&#x22;,        &#x22;system.safety_validate_harmful_content&#x22;,      ],      label: &#x60;comment ${filename}&#x60;,    },  );  const { text, fences } = res;  const newContent = fences?.[0]?.content ?? text;  return newContent;}async function checkModifications(filename: string): Promise<boolean> {  const diff = await git.diff({ paths: filename });  if (!diff) return false;  const res = await runPrompt(    (ctx) => {      ctx.def(&#x22;DIFF&#x22;, diff, { language: &#x22;diff&#x22; });      ctx.$&#x60;You are an expert developer at all programming languages.        Your task is to analyze the changes in DIFF and make sure that only comments are modified.        Report all changes that are not comments or spacing and print <MOD>;        otherwise, print <NO_MOD>.        &#x60;;    },    {      system: [&#x22;system.assistant&#x22;, &#x22;system.safety_jailbreak&#x22;],      cache: &#x22;cmt-check&#x22;,      label: &#x60;check comments in ${filename}&#x60;,    },  );  const modified = res.text?.includes(&#x22;<MOD>&#x22;) || !res.text?.includes(&#x22;<NO_MOD>&#x22;);  return modified;}"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h2"><h2 id="sécurité-du-contenu">Sécurité du contenu</h2><a class="sl-anchor-link" href="#sécurité-du-contenu"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section intitulée « Sécurité du contenu »</span></a></div>
<p>Les mesures suivantes sont prises pour assurer la sécurité du contenu généré :</p>
<ul>
<li>Ce script inclut des invites système pour empêcher les injections de prompt et la génération de contenu nuisible.
<ul>
<li><a href="../../reference/scripts/system#systemsafety_jailbreak/">system.safety_jailbreak</a></li>
<li><a href="../../reference/scripts/system#systemsafety_harmful_content/">system.safety_harmful_content</a></li>
</ul>
</li>
<li>La description générée est sauvegardée dans un fichier à un chemin spécifique, ce qui permet une revue manuelle avant de valider les modifications.</li>
</ul>
<p>Des mesures supplémentaires pour renforcer la sécurité incluent l’exécution <a href="https://learn.microsoft.com/en-us/azure/ai-services/openai/concepts/content-filter?tabs=warning%2Cuser-prompt%2Cpython-new">d’un modèle avec un filtre de sécurité</a>
ou la validation du message via un <a href="../../reference/scripts/content-safety/">service de sécurité de contenu</a>.</p>
<p>Consultez la <a href="../../reference/transparency-note/">Note de transparence</a> pour plus d’informations sur la sécurité du contenu.</p> </div> <footer>
Built with 💗 by Microsoft |
<a href="https://microsoft.github.io/genaiscript/llms-full.txt" target="_blank" rel="noopener noreferrer">Docs for LLMS</a>
| <a href="https://go.microsoft.com/fwlink/?LinkId=521839" target="_blank" rel="noopener noreferrer">Privacy &amp; Cookies</a>
| <a href="https://www.microsoft.com/en-us/legal/intellectualproperty/copyright" target="_blank" rel="noopener noreferrer">Terms of Use</a>
| <a href="https://www.microsoft.com/en-us/legal/intellectualproperty/trademarks/usage/general" target="_blank" rel="noopener noreferrer">Trademarks</a>
| <a href="https://go.microsoft.com/fwlink/?linkid=2259814" target="_blank" rel="noopener noreferrer">Consumer Health Privacy</a> </footer> </div> </div>   </main> </div> </div>  </div> </div>  </body></html>